{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { ChevronDown, ChevronRight, File, Folder, Search, GitBranch, Monitor, MoreHorizontal, X, FolderPlus } from 'lucide-react';\nimport { FileItem } from '@/lib/fileApi';\n\ninterface SidebarProps {\n  files: FileItem[];\n  activeFile: string;\n  onFileSelect: (fileName: string) => void;\n  onCreateFile: (name: string, type?: 'file' | 'directory') => void;\n  onDeleteFile: (fileName: string) => void;\n  onConnectLocalFolder?: () => void;\n  workspaceName?: string;\n  isLocalWorkspace?: boolean;\n}\n\nexport function Sidebar({ files, activeFile, onFileSelect, onCreateFile, onDeleteFile, onConnectLocalFolder, workspaceName, isLocalWorkspace }: SidebarProps) {\n  const [isFilesExpanded, setIsFilesExpanded] = useState(true);\n  const [isChatsExpanded, setIsChatsExpanded] = useState(true);\n  const [isCreating, setIsCreating] = useState(false);\n  const [createType, setCreateType] = useState<'file' | 'directory'>('file');\n  const [newFileName, setNewFileName] = useState('');\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex justify-center gap-2 px-2 py-2 flex-shrink-0\">\n        <button \n          className=\"p-1 text-muted-foreground hover:text-foreground rounded bg-muted\"\n          onClick={() => {\n            setIsCreating(true);\n            setCreateType('file');\n            setNewFileName('');\n          }}\n          title=\"New File\"\n        >\n          <File size={16} />\n        </button>\n        <button \n          className=\"p-1 text-muted-foreground hover:text-foreground rounded\"\n          onClick={() => {\n            setIsCreating(true);\n            setCreateType('directory');\n            setNewFileName('');\n          }}\n          title=\"New Folder\"\n        >\n          <FolderPlus size={16} />\n        </button>\n        <button className=\"p-1 text-muted-foreground hover:text-foreground rounded\">\n          <Search size={16} />\n        </button>\n        <button className=\"p-1 text-muted-foreground hover:text-foreground rounded\">\n          <GitBranch size={16} />\n        </button>\n        <button \n          className=\"p-1 text-muted-foreground hover:text-foreground rounded\"\n          onClick={onConnectLocalFolder}\n          title=\"Connect Local Folder\"\n        >\n          <Monitor size={16} />\n        </button>\n        <button className=\"p-1 text-muted-foreground hover:text-foreground rounded\">\n          <MoreHorizontal size={16} />\n        </button>\n      </div>\n\n      {/* File Explorer */}\n      <div className=\"flex-1 overflow-auto px-2 py-1\">\n        <div className=\"mb-2\">\n          <div \n            className=\"flex items-center py-1 px-2 cursor-pointer hover:bg-muted rounded\"\n            onClick={() => setIsFilesExpanded(!isFilesExpanded)}\n          >\n            {isFilesExpanded ? (\n              <ChevronDown size={12} className=\"mr-1 text-muted-foreground\" />\n            ) : (\n              <ChevronRight size={12} className=\"mr-1 text-muted-foreground\" />\n            )}\n            <span className=\"font-medium text-xs uppercase text-muted-foreground truncate\">Files</span>\n          </div>\n          \n          {isFilesExpanded && (\n            <div className=\"ml-2\">\n              <div className=\"mb-px\">\n                <div className=\"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer\">\n                  <ChevronDown size={12} className=\"mr-1 text-muted-foreground\" />\n                  {isLocalWorkspace ? (\n                    <Monitor size={16} className=\"mr-2 text-green-600 flex-shrink-0\" />\n                  ) : (\n                    <Folder size={16} className=\"mr-2 text-muted-foreground flex-shrink-0\" />\n                  )}\n                  <span className=\"truncate\">{workspaceName || 'workspace'}</span>\n                  {isLocalWorkspace && (\n                    <span className=\"ml-1 text-xs text-green-600 font-medium\">Local</span>\n                  )}\n                </div>\n                \n                <div className=\"ml-4\">\n                  {/* Create new file/folder input */}\n                  {isCreating && (\n                    <div className=\"flex items-center py-0.5 px-2 mb-1\">\n                      {createType === 'directory' ? (\n                        <Folder size={16} className=\"mr-2 text-muted-foreground flex-shrink-0\" />\n                      ) : (\n                        <File size={16} className=\"mr-2 text-muted-foreground flex-shrink-0\" />\n                      )}\n                      <input\n                        type=\"text\"\n                        value={newFileName}\n                        onChange={(e) => setNewFileName(e.target.value)}\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter' && newFileName.trim()) {\n                            onCreateFile(newFileName.trim(), createType);\n                            setIsCreating(false);\n                            setNewFileName('');\n                          } else if (e.key === 'Escape') {\n                            setIsCreating(false);\n                            setNewFileName('');\n                          }\n                        }}\n                        onBlur={() => {\n                          if (newFileName.trim()) {\n                            onCreateFile(newFileName.trim(), createType);\n                          }\n                          setIsCreating(false);\n                          setNewFileName('');\n                        }}\n                        placeholder={createType === 'directory' ? 'Folder name' : 'File name'}\n                        className=\"flex-1 bg-background text-foreground text-xs border border-border rounded px-1 py-0.5 focus:outline-none focus:ring-1 focus:ring-primary\"\n                        autoFocus\n                      />\n                    </div>\n                  )}\n                  \n                  {/* File list */}\n                  {files\n                    .filter(file => file.type === 'directory')\n                    .map((directory) => (\n                      <div\n                        key={directory.name}\n                        className=\"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer group\"\n                        onClick={() => onFileSelect(directory.name)}\n                      >\n                        <Folder size={16} className=\"mr-2 text-muted-foreground flex-shrink-0\" />\n                        <span className=\"truncate flex-1\">{directory.name}</span>\n                        <button\n                          className=\"opacity-0 group-hover:opacity-100 size-4 flex items-center justify-center text-muted-foreground hover:text-red-500\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            onDeleteFile(directory.name);\n                          }}\n                        >\n                          <X size={12} />\n                        </button>\n                      </div>\n                    ))}\n                  \n                  {files\n                    .filter(file => file.type === 'file')\n                    .map((file) => (\n                      <div \n                        key={file.name}\n                        className={`flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer group ${\n                          activeFile === file.name ? 'bg-muted' : ''\n                        }`}\n                        onClick={() => onFileSelect(file.name)}\n                      >\n                        <File size={16} className=\"mr-2 text-muted-foreground flex-shrink-0\" />\n                        <span className={`truncate flex-1 ${activeFile === file.name ? 'text-foreground' : ''}`}>\n                          {file.name}\n                        </span>\n                        <button\n                          className=\"opacity-0 group-hover:opacity-100 size-4 flex items-center justify-center text-muted-foreground hover:text-red-500\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            onDeleteFile(file.name);\n                          }}\n                        >\n                          <X size={12} />\n                        </button>\n                      </div>\n                    ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Chats Section */}\n        <div className=\"mb-2\">\n          <div \n            className=\"flex items-center py-1 px-2 cursor-pointer text-muted-foreground hover:bg-muted rounded\"\n            onClick={() => setIsChatsExpanded(!isChatsExpanded)}\n          >\n            {isChatsExpanded ? (\n              <ChevronDown size={12} className=\"mr-1 text-muted-foreground\" />\n            ) : (\n              <ChevronRight size={12} className=\"mr-1 text-muted-foreground\" />\n            )}\n            <span className=\"font-medium text-xs uppercase text-muted-foreground truncate\">Chats</span>\n          </div>\n          \n          {isChatsExpanded && (\n            <div className=\"ml-2\">\n              <div className=\"mb-px\">\n                <div className=\"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer\">\n                  <div className=\"w-4 h-4 mr-2 flex items-center justify-center\">\n                    <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n                  </div>\n                  <span className=\"truncate\">Update Videos Def...</span>\n                </div>\n              </div>\n              <div className=\"mb-px\">\n                <div className=\"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer\">\n                  <div className=\"w-4 h-4 mr-2 flex items-center justify-center\">\n                    <div className=\"w-2 h-2 rounded-full bg-yellow-500\"></div>\n                  </div>\n                  <span className=\"truncate\">Fix Memory Leak</span>\n                </div>\n              </div>\n              <div className=\"mb-px\">\n                <div className=\"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer\">\n                  <div className=\"w-4 h-4 mr-2 flex items-center justify-center\">\n                    <div className=\"w-2 h-2 rounded-full bg-muted-foreground\"></div>\n                  </div>\n                  <span className=\"truncate\">Update Help Articles</span>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/lib/localFileApi.ts"],"sourcesContent":["// Local file system access using File System Access API\nimport { FileItem } from './fileApi';\n\nexport interface LocalWorkspace {\n  name: string;\n  handle: FileSystemDirectoryHandle;\n}\n\nlet currentWorkspace: LocalWorkspace | null = null;\n\n// Check if File System Access API is supported\nexport function isFileSystemAccessSupported(): boolean {\n  return 'showDirectoryPicker' in window;\n}\n\n// Connect to a local folder\nexport async function connectToLocalFolder(): Promise<LocalWorkspace> {\n  if (!isFileSystemAccessSupported()) {\n    throw new Error('File System Access API is not supported in this browser');\n  }\n\n  try {\n    const directoryHandle = await window.showDirectoryPicker({\n      mode: 'readwrite',\n    });\n\n    const workspace: LocalWorkspace = {\n      name: directoryHandle.name,\n      handle: directoryHandle,\n    };\n\n    currentWorkspace = workspace;\n    return workspace;\n  } catch (error) {\n    if (error instanceof Error && error.name === 'AbortError') {\n      throw new Error('User cancelled folder selection');\n    }\n    throw new Error('Failed to access local folder');\n  }\n}\n\n// Get current workspace\nexport function getCurrentWorkspace(): LocalWorkspace | null {\n  return currentWorkspace;\n}\n\n// List files in the current workspace\nexport async function listLocalFiles(path: string = ''): Promise<FileItem[]> {\n  if (!currentWorkspace) {\n    throw new Error('No workspace connected');\n  }\n\n  try {\n    let targetDir = currentWorkspace.handle;\n    \n    // Navigate to the specified path\n    if (path) {\n      const pathParts = path.split('/').filter(part => part);\n      for (const part of pathParts) {\n        targetDir = await targetDir.getDirectoryHandle(part);\n      }\n    }\n\n    const files: FileItem[] = [];\n    \n    for await (const [name, handle] of targetDir.entries()) {\n      const relativePath = path ? `${path}/${name}` : name;\n      \n      if (handle.kind === 'directory') {\n        files.push({\n          name,\n          type: 'directory',\n          path: relativePath,\n        });\n      } else if (handle.kind === 'file') {\n        const fileHandle = handle as FileSystemFileHandle;\n        const file = await fileHandle.getFile();\n        const content = await file.text();\n        \n        files.push({\n          name,\n          type: 'file',\n          path: relativePath,\n          content,\n        });\n      }\n    }\n\n    return files.sort((a, b) => {\n      // Directories first, then files\n      if (a.type !== b.type) {\n        return a.type === 'directory' ? -1 : 1;\n      }\n      return a.name.localeCompare(b.name);\n    });\n  } catch {\n    throw new Error('Failed to list local files');\n  }\n}\n\n// Save file to local workspace\nexport async function saveLocalFile(path: string, content: string): Promise<void> {\n  if (!currentWorkspace) {\n    throw new Error('No workspace connected');\n  }\n\n  try {\n    const pathParts = path.split('/').filter(part => part);\n    const fileName = pathParts.pop()!;\n    \n    let targetDir = currentWorkspace.handle;\n    \n    // Navigate to the parent directory\n    for (const part of pathParts) {\n      try {\n        targetDir = await targetDir.getDirectoryHandle(part);\n      } catch {\n        // Create directory if it doesn't exist\n        targetDir = await targetDir.getDirectoryHandle(part, { create: true });\n      }\n    }\n\n    // Get or create the file\n    const fileHandle = await targetDir.getFileHandle(fileName, { create: true });\n    const writable = await fileHandle.createWritable();\n    await writable.write(content);\n    await writable.close();\n  } catch {\n    throw new Error('Failed to save local file');\n  }\n}\n\n// Create file or directory in local workspace\nexport async function createLocalFile(\n  name: string,\n  type: 'file' | 'directory' = 'file',\n  content: string = '',\n  path: string = ''\n): Promise<FileItem> {\n  if (!currentWorkspace) {\n    throw new Error('No workspace connected');\n  }\n\n  try {\n    const pathParts = path ? path.split('/').filter(part => part) : [];\n    let targetDir = currentWorkspace.handle;\n    \n    // Navigate to the target directory\n    for (const part of pathParts) {\n      try {\n        targetDir = await targetDir.getDirectoryHandle(part);\n      } catch {\n        targetDir = await targetDir.getDirectoryHandle(part, { create: true });\n      }\n    }\n\n    const relativePath = path ? `${path}/${name}` : name;\n\n    if (type === 'directory') {\n      await targetDir.getDirectoryHandle(name, { create: true });\n      return {\n        name,\n        type: 'directory',\n        path: relativePath,\n      };\n    } else {\n      const fileHandle = await targetDir.getFileHandle(name, { create: true });\n      const writable = await fileHandle.createWritable();\n      await writable.write(content);\n      await writable.close();\n      \n      return {\n        name,\n        type: 'file',\n        path: relativePath,\n        content,\n      };\n    }\n  } catch {\n    throw new Error('Failed to create local file');\n  }\n}\n\n// Delete file or directory from local workspace\nexport async function deleteLocalFile(path: string): Promise<void> {\n  if (!currentWorkspace) {\n    throw new Error('No workspace connected');\n  }\n\n  try {\n    const pathParts = path.split('/').filter(part => part);\n    const itemName = pathParts.pop()!;\n    \n    let targetDir = currentWorkspace.handle;\n    \n    // Navigate to the parent directory\n    for (const part of pathParts) {\n      targetDir = await targetDir.getDirectoryHandle(part);\n    }\n\n    await targetDir.removeEntry(itemName, { recursive: true });\n  } catch {\n    throw new Error('Failed to delete local file');\n  }\n}\n\n// Get local file content\nexport async function getLocalFile(path: string): Promise<FileItem> {\n  if (!currentWorkspace) {\n    throw new Error('No workspace connected');\n  }\n\n  try {\n    const pathParts = path.split('/').filter(part => part);\n    const fileName = pathParts.pop()!;\n    \n    let targetDir = currentWorkspace.handle;\n    \n    // Navigate to the parent directory\n    for (const part of pathParts) {\n      targetDir = await targetDir.getDirectoryHandle(part);\n    }\n\n    const fileHandle = await targetDir.getFileHandle(fileName);\n    const file = await fileHandle.getFile();\n    const content = await file.text();\n\n    return {\n      name: fileName,\n      type: 'file',\n      path,\n      content,\n    };\n  } catch {\n    throw new Error('Failed to get local file');\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/lib/fileApi.ts"],"sourcesContent":["// File system API utilities\nimport { \n  listLocalFiles, \n  saveLocalFile, \n  createLocalFile, \n  deleteLocalFile, \n  getLocalFile,\n  getCurrentWorkspace \n} from './localFileApi';\n\nexport interface FileItem {\n  name: string;\n  type: 'file' | 'directory';\n  path: string;\n  content?: string;\n}\n\nexport type WorkspaceMode = 'remote' | 'local';\n\nlet currentWorkspaceMode: WorkspaceMode = 'remote';\n\nexport interface CreateFileRequest {\n  name: string;\n  type: 'file' | 'directory';\n  content?: string;\n  path?: string;\n}\n\n// Workspace mode management\nexport function setWorkspaceMode(mode: WorkspaceMode) {\n  currentWorkspaceMode = mode;\n  console.log('FileApi: Setting workspace mode to:', mode);\n  \n  // Sync with unified file operations (avoid circular dependency)\n  import('./unifiedFileOps').then(unifiedFileOps => {\n    if (unifiedFileOps.setWorkspaceMode) {\n      unifiedFileOps.setWorkspaceMode(mode);\n      console.log('Synced workspace mode to unified file ops:', mode);\n    }\n  }).catch(error => {\n    console.warn('Failed to sync workspace mode:', error);\n  });\n}\n\nexport function getWorkspaceMode(): WorkspaceMode {\n  return currentWorkspaceMode;\n}\n\nexport function getWorkspaceInfo() {\n  if (currentWorkspaceMode === 'local') {\n    const workspace = getCurrentWorkspace();\n    return {\n      mode: 'local' as const,\n      name: workspace?.name || 'Local Workspace',\n    };\n  }\n  return {\n    mode: 'remote' as const,\n    name: 'workspace',\n  };\n}\n\n// List files and directories\nexport async function listFiles(path: string = ''): Promise<FileItem[]> {\n  if (currentWorkspaceMode === 'local') {\n    return listLocalFiles(path);\n  }\n  \n  const response = await fetch(`/api/files?path=${encodeURIComponent(path)}`);\n  if (!response.ok) {\n    throw new Error('Failed to list files');\n  }\n  const data = await response.json();\n  return data.files;\n}\n\n// Create file or directory\nexport async function createFile(request: CreateFileRequest): Promise<FileItem> {\n  if (currentWorkspaceMode === 'local') {\n    return createLocalFile(request.name, request.type, request.content || '', request.path || '');\n  }\n  \n  const response = await fetch('/api/files', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(request),\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to create file');\n  }\n  \n  const data = await response.json();\n  return data.file;\n}\n\n// Save file content\nexport async function saveFile(path: string, content: string): Promise<void> {\n  if (currentWorkspaceMode === 'local') {\n    return saveLocalFile(path, content);\n  }\n  \n  const response = await fetch(`/api/files/${path}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ content }),\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to save file');\n  }\n}\n\n// Delete file or directory\nexport async function deleteFile(path: string): Promise<void> {\n  if (currentWorkspaceMode === 'local') {\n    return deleteLocalFile(path);\n  }\n  \n  const response = await fetch(`/api/files/${path}`, {\n    method: 'DELETE',\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to delete file');\n  }\n}\n\n// Get file content\nexport async function getFile(path: string): Promise<FileItem> {\n  if (currentWorkspaceMode === 'local') {\n    return getLocalFile(path);\n  }\n  \n  const response = await fetch(`/api/files/${path}`);\n  if (!response.ok) {\n    throw new Error('Failed to get file');\n  }\n  return response.json();\n}"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;;;;;;AAC5B;;AAkBA,IAAI,uBAAsC;AAUnC,SAAS,iBAAiB,IAAmB;IAClD,uBAAuB;IACvB,QAAQ,GAAG,CAAC,uCAAuC;IAEnD,gEAAgE;IAChE,gIAA2B,IAAI,CAAC,CAAA;QAC9B,IAAI,eAAe,gBAAgB,EAAE;YACnC,eAAe,gBAAgB,CAAC;YAChC,QAAQ,GAAG,CAAC,8CAA8C;QAC5D;IACF,GAAG,KAAK,CAAC,CAAA;QACP,QAAQ,IAAI,CAAC,kCAAkC;IACjD;AACF;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,IAAI,yBAAyB,SAAS;QACpC,MAAM,YAAY,CAAA,GAAA,6HAAA,CAAA,sBAAmB,AAAD;QACpC,OAAO;YACL,MAAM;YACN,MAAM,CAAA,sBAAA,gCAAA,UAAW,IAAI,KAAI;QAC3B;IACF;IACA,OAAO;QACL,MAAM;QACN,MAAM;IACR;AACF;AAGO,eAAe;QAAU,OAAA,iEAAe;IAC7C,IAAI,yBAAyB,SAAS;QACpC,OAAO,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;IACxB;IAEA,MAAM,WAAW,MAAM,MAAM,AAAC,mBAA2C,OAAzB,mBAAmB;IACnE,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,KAAK;AACnB;AAGO,eAAe,WAAW,OAA0B;IACzD,IAAI,yBAAyB,SAAS;QACpC,OAAO,CAAA,GAAA,6HAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ,IAAI,EAAE,QAAQ,IAAI,EAAE,QAAQ,OAAO,IAAI,IAAI,QAAQ,IAAI,IAAI;IAC5F;IAEA,MAAM,WAAW,MAAM,MAAM,cAAc;QACzC,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,OAAO,KAAK,IAAI;AAClB;AAGO,eAAe,SAAS,IAAY,EAAE,OAAe;IAC1D,IAAI,yBAAyB,SAAS;QACpC,OAAO,CAAA,GAAA,6HAAA,CAAA,gBAAa,AAAD,EAAE,MAAM;IAC7B;IAEA,MAAM,WAAW,MAAM,MAAM,AAAC,cAAkB,OAAL,OAAQ;QACjD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,eAAe,WAAW,IAAY;IAC3C,IAAI,yBAAyB,SAAS;QACpC,OAAO,CAAA,GAAA,6HAAA,CAAA,kBAAe,AAAD,EAAE;IACzB;IAEA,MAAM,WAAW,MAAM,MAAM,AAAC,cAAkB,OAAL,OAAQ;QACjD,QAAQ;IACV;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,eAAe,QAAQ,IAAY;IACxC,IAAI,yBAAyB,SAAS;QACpC,OAAO,CAAA,GAAA,6HAAA,CAAA,eAAY,AAAD,EAAE;IACtB;IAEA,MAAM,WAAW,MAAM,MAAM,AAAC,cAAkB,OAAL;IAC3C,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 928, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/components/EditorArea.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport dynamic from 'next/dynamic';\nimport { ArrowLeft, ArrowRight, Settings, MessageSquare, X, File, Maximize2, Minimize2, Eye, Send } from 'lucide-react';\nimport { getWorkspaceMode } from '@/lib/fileApi';\nimport { getLocalFile } from '@/lib/localFileApi';\n\nconst MonacoEditor = dynamic(\n  () => import('@monaco-editor/react'),\n  { ssr: false }\n);\n\n// Async function to process HTML content with local file reading capability\nasync function processHTMLForPreviewAsync(htmlContent: string, openFiles: {[key: string]: string}): Promise<string> {\n  const workspaceMode = getWorkspaceMode();\n  console.log('processHTMLForPreviewAsync: workspaceMode =', workspaceMode);\n  console.log('processHTMLForPreviewAsync: openFiles keys =', Object.keys(openFiles));\n  console.log('processHTMLForPreviewAsync: original HTML =', htmlContent.substring(0, 200));\n  \n  if (workspaceMode === 'remote') {\n    console.log('processHTMLForPreviewAsync: Processing for remote mode');\n    // Rewrite relative asset URLs to use workspace assets endpoint\n    let processedHTML = htmlContent\n      .replace(/href=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.css)[\"']/gm, 'href=\"/api/workspace-assets/$1\"')\n      .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.js)[\"']/gm, 'src=\"/api/workspace-assets/$1\"')\n      .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.(png|jpg|jpeg|gif|svg|ico))[\"']/gm, 'src=\"/api/workspace-assets/$1\"');\n    \n    // Debug: show what we're replacing\n    const cssMatches = htmlContent.match(/href=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.css)[\"']/gm);\n    const jsMatches = htmlContent.match(/src=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.js)[\"']/gm);\n    console.log('processHTMLForPreviewAsync: CSS matches found:', cssMatches);\n    console.log('processHTMLForPreviewAsync: JS matches found:', jsMatches);\n    console.log('processHTMLForPreviewAsync: processed remote HTML =', processedHTML.substring(0, 400));\n    return processedHTML;\n  } else if (workspaceMode === 'local') {\n    console.log('processHTMLForPreviewAsync: Processing for local mode');\n    let processedHTML = htmlContent;\n    \n    // Find all CSS and JS files referenced in the HTML\n    const cssMatches = htmlContent.match(/href=[\"']([^\"']+\\.css)[\"']/g) || [];\n    const jsMatches = htmlContent.match(/src=[\"']([^\"']+\\.js)[\"']/g) || [];\n    \n    console.log('processHTMLForPreviewAsync: Found CSS references:', cssMatches);\n    console.log('processHTMLForPreviewAsync: Found JS references:', jsMatches);\n    \n    // Process CSS files - try open files first, then read from local folder\n    for (const match of cssMatches) {\n      const cssFile = match.match(/href=[\"']([^\"']+\\.css)[\"']/)?.[1];\n      if (!cssFile) continue;\n      \n      console.log('processHTMLForPreviewAsync: Processing CSS file:', cssFile);\n      \n      // First try to get from open files\n      let cssContent = openFiles[cssFile];\n      \n      // If not in open files, try to read from local folder\n      if (!cssContent) {\n        try {\n          console.log('processHTMLForPreviewAsync: Reading CSS from local folder:', cssFile);\n          const localFile = await getLocalFile(cssFile);\n          cssContent = localFile.content;\n          console.log('processHTMLForPreviewAsync: Successfully read CSS from local folder');\n        } catch (error) {\n          console.warn(`processHTMLForPreviewAsync: Failed to read CSS file \"${cssFile}\" from local folder:`, error);\n        }\n      }\n      \n      if (cssContent) {\n        console.log('processHTMLForPreviewAsync: Inlining CSS for:', cssFile);\n        processedHTML = processedHTML.replace(\n          new RegExp(`<link[^>]+rel=[\"']stylesheet[\"'][^>]*href=[\"']${cssFile.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}[\"'][^>]*>`, 'gi'),\n          `<style>${cssContent}</style>`\n        );\n      } else {\n        console.warn(`processHTMLForPreviewAsync: CSS file \"${cssFile}\" not found in open files or local folder`);\n      }\n    }\n    \n    // Process JS files - try open files first, then read from local folder\n    for (const match of jsMatches) {\n      const jsFile = match.match(/src=[\"']([^\"']+\\.js)[\"']/)?.[1];\n      if (!jsFile) continue;\n      \n      console.log('processHTMLForPreviewAsync: Processing JS file:', jsFile);\n      \n      // First try to get from open files\n      let jsContent = openFiles[jsFile];\n      \n      // If not in open files, try to read from local folder\n      if (!jsContent) {\n        try {\n          console.log('processHTMLForPreviewAsync: Reading JS from local folder:', jsFile);\n          const localFile = await getLocalFile(jsFile);\n          jsContent = localFile.content;\n          console.log('processHTMLForPreviewAsync: Successfully read JS from local folder');\n        } catch (error) {\n          console.warn(`processHTMLForPreviewAsync: Failed to read JS file \"${jsFile}\" from local folder:`, error);\n        }\n      }\n      \n      if (jsContent) {\n        console.log('processHTMLForPreviewAsync: Inlining JS for:', jsFile);\n        processedHTML = processedHTML.replace(\n          new RegExp(`<script[^>]*src=[\"']${jsFile.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}[\"'][^>]*><\\/script>`, 'gi'),\n          `<script>${jsContent}</script>`\n        );\n      } else {\n        console.warn(`processHTMLForPreviewAsync: JS file \"${jsFile}\" not found in open files or local folder`);\n      }\n    }\n    \n    console.log('processHTMLForPreviewAsync: processed local HTML =', processedHTML.substring(0, 200));\n    return processedHTML;\n  }\n  \n  console.log('processHTMLForPreviewAsync: No processing, returning original HTML');\n  return htmlContent;\n}\n\n// Fallback sync version for immediate display\nfunction processHTMLForPreviewSync(htmlContent: string, openFiles: {[key: string]: string}): string {\n  const workspaceMode = getWorkspaceMode();\n  \n  if (workspaceMode === 'remote') {\n    return htmlContent\n      .replace(/href=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.css)[\"']/gm, 'href=\"/api/workspace-assets/$1\"')\n      .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.js)[\"']/gm, 'src=\"/api/workspace-assets/$1\"')\n      .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|\\/api\\/)([^\"']+\\.(png|jpg|jpeg|gif|svg|ico))[\"']/gm, 'src=\"/api/workspace-assets/$1\"');\n  }\n  \n  return htmlContent;\n}\n\ninterface EditorAreaProps {\n  openFiles: {[key: string]: string};\n  activeFile: string;\n  onFileChange: (fileName: string, content: string) => void;\n  onFileClose: (fileName: string) => void;\n  onFileSelect: (fileName: string) => void;\n  isPreviewFullscreen?: boolean;\n  onTogglePreviewFullscreen?: () => void;\n  onAddQueuedMessage?: (element: string, message: string) => void;\n}\n\nexport function EditorArea({ openFiles, activeFile, onFileChange, onFileClose, onFileSelect, isPreviewFullscreen, onTogglePreviewFullscreen, onAddQueuedMessage }: EditorAreaProps) {\n  const [activeView, setActiveView] = useState<'code' | 'preview' | 'split'>('code');\n  const [isInspectionMode, setIsInspectionMode] = useState(false);\n  const [inspectionPrompt, setInspectionPrompt] = useState<{\n    element: string;\n    position: { x: number; y: number };\n    show: boolean;\n  } | null>(null);\n  const [promptMessage, setPromptMessage] = useState('');\n  const [processedHTML, setProcessedHTML] = useState<string>('');\n  const [isProcessingHTML, setIsProcessingHTML] = useState(false);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  \n  const currentFileContent = openFiles[activeFile];\n  const openFileNames = Object.keys(openFiles);\n\n  // Keyboard event listener for inspection mode\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'c' || e.key === 'C') {\n        if (activeView === 'preview' || activeView === 'split') {\n          setIsInspectionMode(!isInspectionMode);\n          setInspectionPrompt(null);\n        }\n      }\n      if (e.key === 'Escape') {\n        setIsInspectionMode(false);\n        setInspectionPrompt(null);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isInspectionMode, activeView]);\n\n  // Inject inspection script into iframe\n  useEffect(() => {\n    if (!iframeRef.current || !isInspectionMode) return;\n    \n    const iframe = iframeRef.current;\n    const handleLoad = () => {\n      try {\n        const iframeDoc = iframe.contentDocument;\n        if (!iframeDoc) return;\n\n        // Remove existing inspection styles and listeners\n        const existingStyle = iframeDoc.getElementById('inspection-styles');\n        if (existingStyle) existingStyle.remove();\n\n        if (isInspectionMode) {\n          // Add inspection styles\n          const style = iframeDoc.createElement('style');\n          style.id = 'inspection-styles';\n          style.textContent = `\n            .inspection-hover {\n              outline: 2px solid #3b82f6 !important;\n              outline-offset: 2px !important;\n              cursor: crosshair !important;\n            }\n          `;\n          iframeDoc.head.appendChild(style);\n\n          // Add event listeners\n          const handleMouseOver = (e: Event) => {\n            if (!isInspectionMode) return;\n            const target = e.target as HTMLElement;\n            target.classList.add('inspection-hover');\n          };\n\n          const handleMouseOut = (e: Event) => {\n            const target = e.target as HTMLElement;\n            target.classList.remove('inspection-hover');\n          };\n\n          const handleClick = (e: Event) => {\n            if (!isInspectionMode) return;\n            e.preventDefault();\n            e.stopPropagation();\n            \n            const target = e.target as HTMLElement;\n            const rect = target.getBoundingClientRect();\n            const iframeRect = iframe.getBoundingClientRect();\n            \n            // Get element selector/info\n            const elementInfo = getElementInfo(target);\n            \n            setInspectionPrompt({\n              element: elementInfo,\n              position: {\n                x: iframeRect.left + rect.left + rect.width / 2,\n                y: iframeRect.top + rect.top + rect.height + 10\n              },\n              show: true\n            });\n          };\n\n          // Attach listeners to all elements\n          const allElements = iframeDoc.querySelectorAll('*');\n          allElements.forEach(el => {\n            el.addEventListener('mouseover', handleMouseOver);\n            el.addEventListener('mouseout', handleMouseOut);\n            el.addEventListener('click', handleClick);\n          });\n        }\n      } catch {\n        // Cross-origin restrictions might prevent access\n        console.log('Could not access iframe content for inspection');\n      }\n    };\n\n    iframe.addEventListener('load', handleLoad);\n    handleLoad(); // Also try immediately if already loaded\n\n    return () => {\n      iframe.removeEventListener('load', handleLoad);\n    };\n  }, [isInspectionMode]);\n\n  // Process HTML when content changes or view changes to preview\n  useEffect(() => {\n    if (activeFile?.endsWith('.html') && currentFileContent && (activeView === 'preview' || activeView === 'split')) {\n      setIsProcessingHTML(true);\n      \n      // Start with sync version for immediate display\n      const syncProcessed = processHTMLForPreviewSync(currentFileContent, openFiles);\n      setProcessedHTML(syncProcessed);\n      \n      // Then process async for better local file handling\n      processHTMLForPreviewAsync(currentFileContent, openFiles)\n        .then(processed => {\n          setProcessedHTML(processed);\n          setIsProcessingHTML(false);\n        })\n        .catch(error => {\n          console.error('Error processing HTML:', error);\n          setIsProcessingHTML(false);\n        });\n    } else {\n      setProcessedHTML('');\n      setIsProcessingHTML(false);\n    }\n  }, [currentFileContent, openFiles, activeView, activeFile]);\n\n  const getElementInfo = (element: HTMLElement): string => {\n    const tagName = element.tagName.toLowerCase();\n    const id = element.id ? `#${element.id}` : '';\n    const className = element.className ? `.${element.className.split(' ').join('.')}` : '';\n    const textContent = element.textContent?.substring(0, 50) || '';\n    \n    return `${tagName}${id}${className} - \"${textContent}\"`;\n  };\n\n  const handleSendInspectionMessage = () => {\n    if (!inspectionPrompt || !promptMessage.trim() || !onAddQueuedMessage) return;\n    \n    onAddQueuedMessage(inspectionPrompt.element, promptMessage.trim());\n    setPromptMessage('');\n    setInspectionPrompt(null);\n    setIsInspectionMode(false);\n  };\n\n  const handleEditorChange = (value: string | undefined) => {\n    if (!value || !activeFile) return;\n    onFileChange(activeFile, value);\n  };\n\n  const getLanguage = (fileName: string) => {\n    const extension = fileName.split('.').pop()?.toLowerCase();\n    switch (extension) {\n      case 'html': return 'html';\n      case 'css': return 'css';\n      case 'js': return 'javascript';\n      case 'ts': return 'typescript';\n      case 'tsx': return 'typescript';\n      case 'jsx': return 'javascript';\n      case 'json': return 'json';\n      case 'md': return 'markdown';\n      default: return 'plaintext';\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Tab Bar */}\n      <div className=\"bg-card flex items-center px-2 h-[32px] border-b border-border flex-shrink-0\">\n        <div className=\"flex items-center mr-2\">\n          <button className=\"size-7 inline-flex items-center justify-center text-muted-foreground hover:text-foreground\">\n            <ArrowLeft size={16} />\n          </button>\n          <button className=\"size-7 inline-flex items-center justify-center text-muted-foreground hover:text-foreground\">\n            <ArrowRight size={16} />\n          </button>\n        </div>\n        \n        <div className=\"flex flex-1 overflow-x-auto select-none h-[32px]\">\n          {openFileNames.map((fileName) => (\n            <div\n              key={fileName}\n              className={`group max-w-[200px] py-1 flex items-center border-l border-border rounded-none px-3 text-xs h-full cursor-pointer ${\n                activeFile === fileName \n                  ? 'bg-muted text-foreground' \n                  : 'hover:bg-muted/50 text-muted-foreground'\n              }`}\n              onClick={() => onFileSelect(fileName)}\n            >\n              <File size={14} className=\"mr-2 text-muted-foreground\" />\n              <span className=\"truncate max-w-[120px]\">{fileName}</span>\n              <button\n                className=\"ml-2 size-4 inline-flex items-center justify-center text-muted-foreground hover:text-foreground opacity-0 group-hover:opacity-100\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  onFileClose(fileName);\n                }}\n              >\n                <X size={14} />\n              </button>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"flex items-center ml-auto\">\n          <button className=\"size-7 p-1 text-muted-foreground hover:text-foreground\">\n            <Settings size={16} />\n          </button>\n          <button className=\"size-7 p-1 text-muted-foreground hover:text-foreground\">\n            <MessageSquare size={16} />\n          </button>\n        </div>\n      </div>\n\n      {/* Editor Controls */}\n      <div className=\"bg-muted flex w-full select-none items-center justify-between border-b border-border\">\n        <div className=\"px-4 py-2 flex items-center text-muted-foreground text-sm flex-grow truncate\">\n          <span className=\"text-muted-foreground\">{activeFile || 'No file selected'}</span>\n        </div>\n        <div className=\"flex items-center px-2 flex-shrink-0\">\n          <div className=\"flex items-center space-x-0.5\">\n            <button \n              className={`h-7 rounded-md gap-1 px-2 text-sm border ${\n                activeView === 'code' \n                  ? 'bg-card border-border' \n                  : 'border-transparent hover:bg-muted opacity-50'\n              }`}\n              onClick={() => setActiveView('code')}\n            >\n              Code\n            </button>\n            <button \n              className={`h-7 rounded-md gap-1 px-2 text-sm border ${\n                activeView === 'preview' \n                  ? 'bg-card border-border' \n                  : 'border-transparent hover:bg-muted opacity-50'\n              }`}\n              onClick={() => setActiveView('preview')}\n            >\n              Preview\n            </button>\n            <button \n              className={`h-7 rounded-md gap-1 px-2 text-sm border ${\n                activeView === 'split' \n                  ? 'bg-card border-border' \n                  : 'border-transparent hover:bg-muted opacity-50'\n              }`}\n              onClick={() => setActiveView('split')}\n            >\n              Split\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Editor Content */}\n      <div className=\"flex-1 overflow-hidden relative font-mono text-sm flex flex-col md:flex-row\">\n        {activeView === 'code' && (\n          <div className=\"w-full h-full\">\n            {activeFile && currentFileContent !== undefined ? (\n              <MonacoEditor\n                height=\"100%\"\n                language={getLanguage(activeFile)}\n                value={currentFileContent}\n                onChange={handleEditorChange}\n                theme=\"vs-dark\"\n                options={{\n                  minimap: { enabled: false },\n                  fontSize: 12,\n                  lineNumbers: 'on',\n                  roundedSelection: false,\n                  scrollBeyondLastLine: false,\n                  automaticLayout: true,\n                  tabSize: 2,\n                  wordWrap: 'on'\n                }}\n              />\n            ) : (\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                No file selected\n              </div>\n            )}\n          </div>\n        )}\n        \n        {activeView === 'preview' && (\n          <div className=\"w-full h-full bg-white relative\">\n            {activeFile?.endsWith('.html') && currentFileContent ? (\n              <>\n                <iframe\n                  ref={iframeRef}\n                  srcDoc={processedHTML || currentFileContent}\n                  className=\"w-full h-full border-none\"\n                  title=\"Preview\"\n                />\n                {/* Inspection Mode Indicator */}\n                {isInspectionMode && (\n                  <div className=\"absolute top-2 left-2 bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium flex items-center gap-2\">\n                    <Eye size={16} />\n                    Inspection Mode (Press ESC to exit)\n                  </div>\n                )}\n                \n                {/* Fullscreen Toggle Button - Top right of preview area */}\n                <button\n                  onClick={onTogglePreviewFullscreen}\n                  className=\"absolute top-2 right-2 p-3 bg-black hover:bg-black/80 text-white rounded-lg shadow-lg transition-all duration-200 hover:scale-105\"\n                  title={isPreviewFullscreen ? \"Exit fullscreen\" : \"Enter fullscreen\"}\n                  style={{ zIndex: 99999, backgroundColor: '#000000' }}\n                >\n                  {isPreviewFullscreen ? (\n                    <Minimize2 size={16} />\n                  ) : (\n                    <Maximize2 size={16} />\n                  )}\n                </button>\n              </>\n            ) : (\n              <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                Preview not available for this file type\n              </div>\n            )}\n          </div>\n        )}\n        \n        {activeView === 'split' && (\n          <div className=\"flex w-full h-full\">\n            <div className=\"w-1/2 h-full\">\n              {activeFile && currentFileContent !== undefined ? (\n                <MonacoEditor\n                  height=\"100%\"\n                  language={getLanguage(activeFile)}\n                  value={currentFileContent}\n                  onChange={handleEditorChange}\n                  theme=\"vs-dark\"\n                  options={{\n                    minimap: { enabled: false },\n                    fontSize: 12,\n                    lineNumbers: 'on',\n                    roundedSelection: false,\n                    scrollBeyondLastLine: false,\n                    automaticLayout: true,\n                    tabSize: 2,\n                    wordWrap: 'on'\n                  }}\n                />\n              ) : (\n                <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                  No file selected\n                </div>\n              )}\n            </div>\n            <div className=\"w-1/2 h-full border-l border-border bg-white relative\">\n              {activeFile?.endsWith('.html') && currentFileContent ? (\n                <>\n                  <iframe\n                    ref={activeView === 'split' ? iframeRef : undefined}\n                    srcDoc={processedHTML || currentFileContent}\n                    className=\"w-full h-full border-none\"\n                    title=\"Preview\"\n                  />\n                  {/* Inspection Mode Indicator */}\n                  {isInspectionMode && (\n                    <div className=\"absolute top-2 left-2 bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium flex items-center gap-2\">\n                      <Eye size={16} />\n                      Inspection Mode (Press ESC to exit)\n                    </div>\n                  )}\n                  \n                  {/* Fullscreen Toggle Button - Top right of preview area */}\n                  <button\n                    onClick={onTogglePreviewFullscreen}\n                    className=\"absolute top-2 right-2 p-3 bg-black hover:bg-black/80 text-white rounded-lg shadow-lg transition-all duration-200 hover:scale-105\"\n                    title={isPreviewFullscreen ? \"Exit fullscreen\" : \"Enter fullscreen\"}\n                    style={{ zIndex: 99999, backgroundColor: '#000000' }}\n                  >\n                    {isPreviewFullscreen ? (\n                      <Minimize2 size={16} />\n                    ) : (\n                      <Maximize2 size={16} />\n                    )}\n                  </button>\n                </>\n              ) : (\n                <div className=\"flex items-center justify-center h-full text-muted-foreground\">\n                  Preview not available for this file type\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n      \n      {/* Floating Inspection Prompt */}\n      {inspectionPrompt?.show && (\n        <div \n          className=\"fixed z-[100000] bg-card border border-border rounded-lg shadow-xl p-4 min-w-80 max-w-md\"\n          style={{\n            left: inspectionPrompt.position.x - 160, // Center the prompt\n            top: inspectionPrompt.position.y,\n          }}\n        >\n          <div className=\"mb-3\">\n            <div className=\"text-sm font-medium text-foreground mb-1\">Element Selected:</div>\n            <div className=\"text-xs text-muted-foreground bg-muted p-2 rounded font-mono\">\n              {inspectionPrompt.element}\n            </div>\n          </div>\n          \n          <div className=\"mb-3\">\n            <textarea\n              value={promptMessage}\n              onChange={(e) => setPromptMessage(e.target.value)}\n              placeholder=\"What would you like to do with this element?\"\n              className=\"w-full h-20 p-2 border border-border rounded text-sm resize-none bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n              autoFocus\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault();\n                  handleSendInspectionMessage();\n                }\n                if (e.key === 'Escape') {\n                  setInspectionPrompt(null);\n                }\n              }}\n            />\n          </div>\n          \n          <div className=\"flex gap-2 justify-end\">\n            <button\n              onClick={() => setInspectionPrompt(null)}\n              className=\"px-3 py-1 text-sm text-muted-foreground hover:text-foreground\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleSendInspectionMessage}\n              disabled={!promptMessage.trim()}\n              className=\"px-3 py-1 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1\"\n            >\n              <Send size={14} />\n              Queue Message\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1808, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/lib/chatApi.ts"],"sourcesContent":["// Chat API utilities\nimport { getWorkspaceMode } from './fileApi';\n\nexport interface ChatMessage {\n  role: 'user' | 'assistant' | 'system';\n  content: string;\n}\n\nexport interface FileContext {\n  name: string;\n  content: string;\n}\n\nexport interface ChatRequest {\n  messages: ChatMessage[];\n  model: string;\n  provider: 'openai' | 'anthropic';\n  fileContext?: FileContext[];\n}\n\n// Available models\nexport const AI_MODELS = {\n  openai: {\n    'gpt-4o': 'GPT-4o',\n    'gpt-4o-mini': 'GPT-4o Mini',\n    'gpt-4-turbo': 'GPT-4 Turbo',\n  },\n  anthropic: {\n    'claude-3-5-sonnet-20241022': 'Claude 3.5 Sonnet',\n    'claude-3-5-haiku-20241022': 'Claude 3.5 Haiku',\n    'claude-3-opus-20240229': 'Claude 3 Opus',\n  },\n} as const;\n\n// Send chat message and get streaming response\nexport async function sendChatMessage(request: ChatRequest): Promise<Response> {\n  const workspaceMode = getWorkspaceMode();\n  console.log('ChatApi: Getting workspace mode:', workspaceMode);\n  console.log('ChatApi: Sending chat request with workspace mode header:', workspaceMode);\n  \n  const headers = {\n    'Content-Type': 'application/json',\n    'x-workspace-mode': workspaceMode,\n  };\n  \n  console.log('ChatApi: Request headers:', headers);\n  \n  const response = await fetch('/api/chat', {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(request),\n  });\n  \n  if (!response.ok) {\n    throw new Error('Failed to send chat message');\n  }\n  \n  return response;\n}"],"names":[],"mappings":"AAAA,qBAAqB;;;;;AACrB;;AAoBO,MAAM,YAAY;IACvB,QAAQ;QACN,UAAU;QACV,eAAe;QACf,eAAe;IACjB;IACA,WAAW;QACT,8BAA8B;QAC9B,6BAA6B;QAC7B,0BAA0B;IAC5B;AACF;AAGO,eAAe,gBAAgB,OAAoB;IACxD,MAAM,gBAAgB,CAAA,GAAA,wHAAA,CAAA,mBAAgB,AAAD;IACrC,QAAQ,GAAG,CAAC,oCAAoC;IAChD,QAAQ,GAAG,CAAC,6DAA6D;IAEzE,MAAM,UAAU;QACd,gBAAgB;QAChB,oBAAoB;IACtB;IAEA,QAAQ,GAAG,CAAC,6BAA6B;IAEzC,MAAM,WAAW,MAAM,MAAM,aAAa;QACxC,QAAQ;QACR;QACA,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1855, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/lib/localFileHandler.ts"],"sourcesContent":["// Client-side handler for local file operations\nimport { \n  createLocalFile, \n  saveLocalFile, \n  deleteLocalFile, \n  getLocalFile, \n  listLocalFiles, \n  getCurrentWorkspace \n} from './localFileApi';\n\nexport interface LocalFileOperation {\n  localOperation: boolean;\n  operation: string;\n  data: {\n    fileName?: string;\n    content?: string;\n    directory?: string;\n  };\n  fileName?: string;\n  content?: string;\n  files?: string[];\n  directories?: string[];\n  message?: string;\n  success?: boolean;\n  error?: string;\n}\n\n// Process a local file operation instruction from AI tools\nexport async function processLocalFileOperation(operation: LocalFileOperation): Promise<LocalFileOperation> {\n  console.log('processLocalFileOperation called with:', operation);\n  \n  if (!operation.localOperation) {\n    console.log('Not a local operation, returning as-is');\n    return operation; // Not a local operation, return as-is\n  }\n\n  const workspace = getCurrentWorkspace();\n  console.log('Current workspace:', workspace);\n  \n  if (!workspace) {\n    console.error('No local workspace connected');\n    return {\n      ...operation,\n      success: false,\n      error: 'No local workspace connected'\n    } as LocalFileOperation;\n  }\n\n  try {\n    switch (operation.operation) {\n      case 'create':\n        return await handleLocalCreate(operation);\n      case 'update':\n        return await handleLocalUpdate(operation);\n      case 'read':\n        return await handleLocalRead(operation);\n      case 'list':\n        return await handleLocalList(operation);\n      case 'delete':\n        return await handleLocalDelete(operation);\n      default:\n        return {\n          ...operation,\n          success: false,\n          error: `Unknown operation: ${operation.operation}`\n        } as LocalFileOperation;\n    }\n  } catch (error) {\n    return {\n      ...operation,\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error'\n    } as LocalFileOperation;\n  }\n}\n\nasync function handleLocalCreate(operation: LocalFileOperation): Promise<LocalFileOperation> {\n  const { fileName, content } = operation.data;\n  \n  if (!fileName || typeof content !== 'string') {\n    throw new Error('Invalid file name or content');\n  }\n  \n  try {\n    await createLocalFile(fileName, 'file', content, '');\n    \n    return {\n      ...operation,\n      success: true,\n      fileName,\n      content: content.slice(0, 200) + (content.length > 200 ? '...' : ''),\n      message: `Created file: ${fileName} in local workspace`\n    } as LocalFileOperation;\n  } catch (error) {\n    throw new Error(`Failed to create local file: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\nasync function handleLocalUpdate(operation: LocalFileOperation): Promise<LocalFileOperation> {\n  const { fileName, content } = operation.data;\n  \n  if (!fileName || typeof content !== 'string') {\n    throw new Error('Invalid file name or content');\n  }\n  \n  try {\n    await saveLocalFile(fileName, content);\n    \n    return {\n      ...operation,\n      success: true,\n      fileName,\n      content: content.slice(0, 200) + (content.length > 200 ? '...' : ''),\n      message: `Updated file: ${fileName} in local workspace`\n    } as LocalFileOperation;\n  } catch (error) {\n    throw new Error(`Failed to update local file: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\nasync function handleLocalRead(operation: LocalFileOperation): Promise<LocalFileOperation> {\n  const { fileName } = operation.data;\n  \n  if (!fileName) {\n    throw new Error('Invalid file name');\n  }\n  \n  try {\n    const file = await getLocalFile(fileName);\n    \n    return {\n      ...operation,\n      success: true,\n      fileName,\n      content: file.content,\n      message: `Read file: ${fileName} from local workspace`\n    } as LocalFileOperation;\n  } catch (error) {\n    throw new Error(`Failed to read local file: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\nasync function handleLocalList(operation: LocalFileOperation): Promise<LocalFileOperation> {\n  const { directory = '' } = operation.data;\n  \n  try {\n    const items = await listLocalFiles(directory);\n    \n    const files = items\n      .filter(item => item.type === 'file')\n      .map(item => item.name);\n      \n    const directories = items\n      .filter(item => item.type === 'directory')\n      .map(item => item.name);\n    \n    return {\n      ...operation,\n      success: true,\n      files,\n      directories,\n      message: `Listed ${files.length} files and ${directories.length} directories from local workspace`\n    } as LocalFileOperation;\n  } catch (error) {\n    throw new Error(`Failed to list local files: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}\n\nasync function handleLocalDelete(operation: LocalFileOperation): Promise<LocalFileOperation> {\n  const { fileName } = operation.data;\n  \n  if (!fileName) {\n    throw new Error('Invalid file name');\n  }\n  \n  try {\n    await deleteLocalFile(fileName);\n    \n    return {\n      ...operation,\n      success: true,\n      fileName,\n      message: `Deleted file: ${fileName} from local workspace`\n    } as LocalFileOperation;\n  } catch (error) {\n    throw new Error(`Failed to delete local file: ${error instanceof Error ? error.message : 'Unknown error'}`);\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2001, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/components/ChatPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { Send, Plus, Cloud, RefreshCw, MoreHorizontal, Hand, ChevronDown, CheckSquare, X, AtSign } from 'lucide-react';\nimport { useChat } from 'ai/react';\nimport { FileItem, getWorkspaceMode } from '@/lib/fileApi';\nimport { AI_MODELS } from '@/lib/chatApi';\nimport { processLocalFileOperation } from '@/lib/localFileHandler';\n\ninterface ChatPanelProps {\n  files: FileItem[];\n  onFileChange?: () => void; // Callback to refresh file list when AI makes changes\n  queuedMessages?: Array<{\n    id: string;\n    element: string;\n    message: string;\n    timestamp: number;\n  }>;\n  onClearQueuedMessage?: (id: string) => void;\n}\n\ninterface FileReference {\n  name: string;\n  content: string;\n}\n\nexport function ChatPanel({ files, onFileChange, queuedMessages = [], onClearQueuedMessage }: ChatPanelProps) {\n  const [mode, setMode] = useState<'manual' | 'auto'>('manual');\n  const [provider, setProvider] = useState<'openai' | 'anthropic'>('openai');\n  const [model, setModel] = useState('gpt-4o');\n  const [fileContext, setFileContext] = useState<FileReference[]>([]);\n  const [isModelMenuOpen, setIsModelMenuOpen] = useState(false);\n  const [showFileMenu, setShowFileMenu] = useState(false);\n  const [cursorPosition, setCursorPosition] = useState(0);\n  const [isUpdatingFiles, setIsUpdatingFiles] = useState(false);\n  const [isProcessingQueue, setIsProcessingQueue] = useState(false);\n  const [currentlyProcessing, setCurrentlyProcessing] = useState<string | null>(null);\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const { messages, input, handleInputChange, handleSubmit: originalHandleSubmit, isLoading, setInput, append } = useChat({\n    api: '/api/chat',\n    fetch: async (input, options) => {\n      const workspaceMode = getWorkspaceMode();\n      console.log('useChat fetch: Adding workspace mode header:', workspaceMode);\n      \n      const headers = {\n        ...options?.headers,\n        'x-workspace-mode': workspaceMode,\n      };\n      \n      console.log('useChat fetch: Headers being sent:', headers);\n      \n      return fetch(input, {\n        ...options,\n        headers,\n      });\n    },\n    body: {\n      model,\n      provider,\n      fileContext,\n    },\n    onToolCall: async ({ toolCall }) => {\n      // Show that AI is performing an action\n      console.log('AI is calling tool:', toolCall.toolName);\n    },\n    onFinish: async (message) => {\n      // Check if any tools were called that might have changed files\n      if (message.toolInvocations && message.toolInvocations.length > 0) {\n        const fileOperations = message.toolInvocations.filter(inv => \n          ['createFile', 'updateFile', 'deleteFile'].includes(inv.toolName)\n        );\n        \n        // Process local file operations if in local mode\n        const workspaceMode = getWorkspaceMode();\n        console.log('Current workspace mode in ChatPanel:', workspaceMode);\n        console.log('File operations found:', fileOperations.length);\n        \n        if (workspaceMode === 'local') {\n          console.log('Processing operations in local mode');\n          for (const invocation of fileOperations) {\n            console.log('Checking invocation:', invocation.toolName, 'state:', invocation.state);\n            \n            // Only process invocations that have completed (state === 'result')\n            if (invocation.state === 'result' && invocation.result) {\n              console.log('Invocation result structure:', JSON.stringify(invocation.result, null, 2));\n              \n              if (invocation.result.localOperation) {\n                try {\n                  console.log('Processing local file operation:', invocation.result);\n                  await processLocalFileOperation(invocation.result);\n                  console.log('Local file operation completed');\n                } catch (error) {\n                  console.error('Failed to process local file operation:', error);\n                }\n              } else {\n                console.log('Not a local operation - localOperation flag:', invocation.result.localOperation);\n              }\n            } else {\n              console.log('No result or invocation not completed. State:', invocation.state);\n            }\n          }\n        } else {\n          console.log('Not in local mode, skipping local operations');\n        }\n        \n        if (fileOperations.length > 0 && onFileChange) {\n          setIsUpdatingFiles(true);\n          // Refresh files smoothly without page reload\n          setTimeout(async () => {\n            await onFileChange();\n            setIsUpdatingFiles(false);\n          }, 100); // Reduced delay for faster updates\n        }\n      }\n    },\n  });\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Handle @ file references\n  const handleInputKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === '@') {\n      setCursorPosition(e.currentTarget.selectionStart);\n      setShowFileMenu(true);\n    } else if (e.key === 'Escape') {\n      setShowFileMenu(false);\n    }\n  };\n\n  const addFileToInput = (file: FileItem) => {\n    if (!file.content) return;\n    \n    const beforeCursor = input.slice(0, cursorPosition + 1); // Include the @\n    const afterCursor = input.slice(cursorPosition + 1);\n    const newInput = beforeCursor + file.name + ' ' + afterCursor;\n    \n    setInput(newInput);\n    \n    // Add to context if not already there\n    if (!fileContext.find(f => f.name === file.name)) {\n      setFileContext(prev => [...prev, { name: file.name, content: file.content! }]);\n    }\n    \n    setShowFileMenu(false);\n    inputRef.current?.focus();\n  };\n\n  const removeFileContext = (fileName: string) => {\n    setFileContext(prev => prev.filter(f => f.name !== fileName));\n  };\n\n  const processQueuedMessages = async () => {\n    if (isProcessingQueue || queuedMessages.length === 0) return;\n    \n    setIsProcessingQueue(true);\n    \n    for (const queuedMessage of queuedMessages) {\n      setCurrentlyProcessing(queuedMessage.id);\n      \n      // Create the formatted message\n      const formattedMessage = `[Element Inspector] ${queuedMessage.element}\\n\\n${queuedMessage.message}`;\n      \n      // Send the message\n      await append({\n        role: 'user',\n        content: formattedMessage\n      });\n      \n      // Wait for the response to complete\n      await new Promise(resolve => {\n        const checkCompletion = () => {\n          if (!isLoading) {\n            resolve(void 0);\n          } else {\n            setTimeout(checkCompletion, 500);\n          }\n        };\n        checkCompletion();\n      });\n      \n      // Clear this message from the queue\n      if (onClearQueuedMessage) {\n        onClearQueuedMessage(queuedMessage.id);\n      }\n      \n      // Small delay between messages\n      await new Promise(resolve => setTimeout(resolve, 1000));\n    }\n    \n    setCurrentlyProcessing(null);\n    setIsProcessingQueue(false);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // If there are queued messages, process them first\n    if (queuedMessages.length > 0) {\n      await processQueuedMessages();\n    }\n    \n    // Then send the regular input if there's any\n    if (input.trim()) {\n      originalHandleSubmit(e);\n    }\n  };\n\n  const handleProviderChange = (newProvider: 'openai' | 'anthropic') => {\n    setProvider(newProvider);\n    const defaultModel = Object.keys(AI_MODELS[newProvider])[0];\n    setModel(defaultModel);\n    setIsModelMenuOpen(false);\n  };\n\n  const formatMessage = (content: string) => {\n    // Simple markdown-like formatting for messages\n    return content\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n      .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n      .replace(/`(.*?)`/g, '<code class=\"bg-muted px-1 rounded text-xs\">$1</code>')\n      .replace(/\\n/g, '<br />');\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"p-2 flex justify-between items-center h-[32px] flex-shrink-0\">\n        <h2 className=\"font-medium p-2 text-foreground truncate\">New Chat</h2>\n        <div className=\"flex gap-1 items-center\">\n          <button \n            className=\"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded\"\n            onClick={() => window.location.reload()}\n          >\n            <Plus size={16} />\n          </button>\n          <button className=\"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded\">\n            <Cloud size={16} />\n          </button>\n          <button className=\"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded\">\n            <RefreshCw size={16} />\n          </button>\n          <button className=\"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded\">\n            <MoreHorizontal size={16} />\n          </button>\n        </div>\n      </div>\n\n      {/* Chat Area */}\n      <div className=\"flex flex-col h-[calc(100%-32px)] w-full\">\n        {messages.length === 0 ? (\n          /* No messages - Input at top */\n          <div className=\"flex-1 min-h-0\">\n            <div className=\"relative h-full overflow-hidden\">\n              <div className=\"size-full rounded-[inherit] overflow-y-auto\">\n                <div className=\"p-3 pt-1\">\n                  {/* Chat Input */}\n                  <div className=\"border rounded-lg mb-3 opacity-100\">\n                    <div className=\"bg-muted/40 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-primary/20 transition-all duration-150\">\n                      <form onSubmit={handleSubmit} className=\"flex flex-col\">\n                        <div className=\"pt-2\">\n                          {/* Queued Messages Display */}\n                          {queuedMessages.length > 0 && (\n                            <div className=\"mb-2 mx-2\">\n                              <div className=\"text-xs font-medium text-muted-foreground mb-2 flex items-center gap-2\">\n                                <span>Inspection Queue ({queuedMessages.length})</span>\n                                {isProcessingQueue && <span className=\"text-primary\">Processing...</span>}\n                              </div>\n                              <div className=\"space-y-1 max-h-24 overflow-y-auto\">\n                                {queuedMessages.map((msg, index) => (\n                                  <div key={msg.id} className={`text-xs p-2 bg-muted/50 border border-border rounded flex justify-between items-start ${\n                                    currentlyProcessing === msg.id ? 'border-primary bg-primary/10' : ''\n                                  }`}>\n                                    <div className=\"flex-1 min-w-0\">\n                                      <div className=\"font-medium text-foreground mb-1 truncate\">\n                                        {index + 1}. {msg.element}\n                                      </div>\n                                      <div className=\"text-muted-foreground line-clamp-1\">\n                                        {msg.message}\n                                      </div>\n                                    </div>\n                                    <button\n                                      type=\"button\"\n                                      onClick={() => onClearQueuedMessage?.(msg.id)}\n                                      disabled={isProcessingQueue}\n                                      className=\"ml-2 text-muted-foreground hover:text-foreground disabled:opacity-50 flex-shrink-0\"\n                                    >\n                                      <X size={12} />\n                                    </button>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n\n                          <div className=\"flex items-center gap-1 px-2\">\n                            <button \n                              type=\"button\"\n                              className=\"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1\"\n                              onClick={() => setShowFileMenu(!showFileMenu)}\n                            >\n                              <span className=\"text-muted-foreground\">@</span>\n                            </button>\n                            \n                            {/* File Context Display */}\n                            {fileContext.map((file) => (\n                              <button \n                                key={file.name}\n                                type=\"button\"\n                                className=\"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1\"\n                                onClick={() => removeFileContext(file.name)}\n                              >\n                                <span className=\"text-muted-foreground\">&lt;/&gt;</span>\n                                <span className=\"text-muted-foreground font-normal truncate max-w-[150px]\">\n                                  {file.name}\n                                </span>\n                                <X size={12} className=\"text-muted-foreground\" />\n                              </button>\n                            ))}\n                          </div>\n                          \n                          {/* File Menu */}\n                          {showFileMenu && (\n                            <div className=\"absolute z-30 mt-1 mx-2 bg-popover border border-border rounded-md shadow-md max-h-40 overflow-y-auto\">\n                              <div className=\"p-2 text-xs font-medium text-muted-foreground border-b border-border\">\n                                Select files to reference:\n                              </div>\n                              {files.filter(f => f.type === 'file' && f.content).map((file) => (\n                                <button\n                                  key={file.name}\n                                  type=\"button\"\n                                  onClick={() => addFileToInput(file)}\n                                  className=\"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2\"\n                                >\n                                  <AtSign size={14} className=\"text-muted-foreground\" />\n                                  {file.name}\n                                </button>\n                              ))}\n                              {files.filter(f => f.type === 'file' && f.content).length === 0 && (\n                                <div className=\"p-3 text-sm text-muted-foreground\">No files available</div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                        \n                        <textarea\n                          ref={inputRef}\n                          placeholder=\"Edit open file and selection\"\n                          className=\"w-full text-foreground border-none shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 placeholder-muted-foreground bg-transparent resize-none overflow-hidden min-h-[40px] max-h-[200px] px-3 py-2 outline-none\"\n                          rows={1}\n                          value={input}\n                          onChange={handleInputChange}\n                          onKeyDown={handleInputKeyDown}\n                          disabled={isLoading}\n                        />\n                        \n                        <div className=\"pb-2\">\n                          <div className=\"flex items-center justify-between px-2\">\n                            <div className=\"flex items-center gap-1\">\n                              <button\n                                type=\"button\"\n                                className=\"h-7 px-2 text-sm flex items-center gap-1 rounded-full bg-muted text-foreground hover:bg-muted/80\"\n                                onClick={() => setMode(mode === 'manual' ? 'auto' : 'manual')}\n                              >\n                                <Hand size={12} className=\"text-muted-foreground\" />\n                                <span className=\"capitalize\">{mode}</span>\n                                <ChevronDown size={12} className=\"text-muted-foreground opacity-60\" />\n                              </button>\n                              \n                              {/* Model Selection */}\n                              <div className=\"relative\">\n                                <button\n                                  type=\"button\"\n                                  className=\"h-7 px-2 text-sm flex items-center gap-1 rounded-md bg-transparent text-muted-foreground/60 hover:bg-muted/80\"\n                                  onClick={() => setIsModelMenuOpen(!isModelMenuOpen)}\n                                >\n                                  <span>{AI_MODELS[provider][model as keyof typeof AI_MODELS[typeof provider]]}</span>\n                                  <ChevronDown size={12} className=\"text-muted-foreground opacity-60\" />\n                                </button>\n                                \n                                {isModelMenuOpen && (\n                                  <div className={`absolute left-0 bg-popover border border-border rounded-md shadow-md min-w-48 z-50 ${\n                                    messages.length === 0 ? 'top-full mt-1' : 'bottom-full mb-1'\n                                  }`}>\n                                    <div className=\"p-2\">\n                                      <div className=\"text-xs font-medium text-muted-foreground mb-2\">OpenAI</div>\n                                      {Object.entries(AI_MODELS.openai).map(([key, label]) => (\n                                        <button\n                                          key={key}\n                                          type=\"button\"\n                                          onClick={() => {\n                                            handleProviderChange('openai');\n                                            setModel(key);\n                                          }}\n                                          className={`w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ${\n                                            provider === 'openai' && model === key ? 'bg-muted' : ''\n                                          }`}\n                                        >\n                                          {label}\n                                        </button>\n                                      ))}\n                                      \n                                      <div className=\"text-xs font-medium text-muted-foreground mt-3 mb-2\">Anthropic</div>\n                                      {Object.entries(AI_MODELS.anthropic).map(([key, label]) => (\n                                        <button\n                                          key={key}\n                                          type=\"button\"\n                                          onClick={() => {\n                                            handleProviderChange('anthropic');\n                                            setModel(key);\n                                          }}\n                                          className={`w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ${\n                                            provider === 'anthropic' && model === key ? 'bg-muted' : ''\n                                          }`}\n                                        >\n                                          {label}\n                                        </button>\n                                      ))}\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <button\n                                type=\"button\"\n                                className=\"size-7 h-7 w-7 rounded-full transition-all duration-150 text-muted-foreground hover:text-foreground hover:bg-muted/50\"\n                              >\n                                <CheckSquare size={14} />\n                              </button>\n                              <div className=\"h-8 w-8 flex items-center justify-center\">\n                                <button\n                                  type=\"submit\"\n                                  className={`size-7 rounded-full h-7 w-7 ${\n                                    input.trim() && !isLoading\n                                      ? 'bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105 opacity-100' \n                                      : 'bg-primary/10 text-primary-foreground opacity-10'\n                                  }`}\n                                  disabled={!input.trim() || isLoading}\n                                >\n                                  <Send size={16} className=\"transform rotate-45\" />\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </form>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          /* Messages exist - Scrollable messages with sticky input at bottom */\n          <div className=\"flex flex-col h-full\">\n            {/* Messages Area */}\n            <div className=\"flex-1 min-h-0\">\n              <div className=\"relative h-full overflow-hidden\">\n                <div className=\"size-full rounded-[inherit] overflow-y-auto\">\n                  <div className=\"p-3 pt-1\">\n                    <div className=\"mb-3 space-y-3\">\n                      {messages.map((message) => (\n                        <div key={message.id} className=\"text-sm\">\n                          <div className=\"font-medium text-xs uppercase text-muted-foreground mb-1\">\n                            {message.role === 'user' ? 'You' : 'Assistant'}\n                          </div>\n                          <div \n                            className=\"text-foreground\"\n                            dangerouslySetInnerHTML={{ __html: formatMessage(message.content) }}\n                          />\n                          \n                          {/* Show tool calls/file operations */}\n                          {message.toolInvocations && message.toolInvocations.length > 0 && (\n                            <div className=\"mt-2 space-y-1\">\n                              {message.toolInvocations.map((toolInvocation, index) => (\n                                <div key={index} className=\"text-xs bg-muted/50 rounded px-2 py-1 border-l-2 border-primary/30\">\n                                  {toolInvocation.state === 'call' && (\n                                    <div className=\"text-muted-foreground\">\n                                      🔧 Calling {toolInvocation.toolName}...\n                                    </div>\n                                  )}\n                                  {toolInvocation.state === 'result' && (\n                                    <div>\n                                      <div className=\"text-primary font-medium\">\n                                        {toolInvocation.toolName === 'createFile' && '📝 Created file'}\n                                        {toolInvocation.toolName === 'updateFile' && '✏️ Updated file'}\n                                        {toolInvocation.toolName === 'deleteFile' && '🗑️ Deleted file'}\n                                        {toolInvocation.toolName === 'readFile' && '📖 Read file'}\n                                        {toolInvocation.toolName === 'listFiles' && '📁 Listed files'}\n                                      </div>\n                                      {toolInvocation.result.success && toolInvocation.result.message && (\n                                        <div className=\"text-muted-foreground\">{toolInvocation.result.message}</div>\n                                      )}\n                                      {!toolInvocation.result.success && toolInvocation.result.error && (\n                                        <div className=\"text-red-500\">Error: {toolInvocation.result.error}</div>\n                                      )}\n                                    </div>\n                                  )}\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                      {isLoading && (\n                        <div className=\"text-sm\">\n                          <div className=\"font-medium text-xs uppercase text-muted-foreground mb-1\">Assistant</div>\n                          <div className=\"text-muted-foreground\">Thinking...</div>\n                        </div>\n                      )}\n                      \n                      {isUpdatingFiles && (\n                        <div className=\"text-sm\">\n                          <div className=\"font-medium text-xs uppercase text-muted-foreground mb-1\">System</div>\n                          <div className=\"text-primary\">🔄 Updating files...</div>\n                        </div>\n                      )}\n                      <div ref={messagesEndRef} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Sticky Input Area */}\n            <div className=\"flex-shrink-0 p-3 pt-0\">\n              <div className=\"border rounded-lg opacity-100\">\n                <div className=\"bg-muted/40 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-primary/20 transition-all duration-150\">\n                  <form onSubmit={handleSubmit} className=\"flex flex-col\">\n                    <div className=\"pt-2\">\n                      {/* Queued Messages Display */}\n                      {queuedMessages.length > 0 && (\n                        <div className=\"mb-2 mx-2\">\n                          <div className=\"text-xs font-medium text-muted-foreground mb-2 flex items-center gap-2\">\n                            <span>Inspection Queue ({queuedMessages.length})</span>\n                            {isProcessingQueue && <span className=\"text-primary\">Processing...</span>}\n                          </div>\n                          <div className=\"space-y-1 max-h-24 overflow-y-auto\">\n                            {queuedMessages.map((msg, index) => (\n                              <div key={msg.id} className={`text-xs p-2 bg-muted/50 border border-border rounded flex justify-between items-start ${\n                                currentlyProcessing === msg.id ? 'border-primary bg-primary/10' : ''\n                              }`}>\n                                <div className=\"flex-1 min-w-0\">\n                                  <div className=\"font-medium text-foreground mb-1 truncate\">\n                                    {index + 1}. {msg.element}\n                                  </div>\n                                  <div className=\"text-muted-foreground line-clamp-1\">\n                                    {msg.message}\n                                  </div>\n                                </div>\n                                <button\n                                  type=\"button\"\n                                  onClick={() => onClearQueuedMessage?.(msg.id)}\n                                  disabled={isProcessingQueue}\n                                  className=\"ml-2 text-muted-foreground hover:text-foreground disabled:opacity-50 flex-shrink-0\"\n                                >\n                                  <X size={12} />\n                                </button>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      <div className=\"flex items-center gap-1 px-2\">\n                        <button \n                          type=\"button\"\n                          className=\"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1\"\n                          onClick={() => setShowFileMenu(!showFileMenu)}\n                        >\n                          <span className=\"text-muted-foreground\">@</span>\n                        </button>\n                        \n                        {/* File Context Display */}\n                        {fileContext.map((file) => (\n                          <button \n                            key={file.name}\n                            type=\"button\"\n                            className=\"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1\"\n                            onClick={() => removeFileContext(file.name)}\n                          >\n                            <span className=\"text-muted-foreground\">&lt;/&gt;</span>\n                            <span className=\"text-muted-foreground font-normal truncate max-w-[150px]\">\n                              {file.name}\n                            </span>\n                            <X size={12} className=\"text-muted-foreground\" />\n                          </button>\n                        ))}\n                      </div>\n                      \n                      {/* File Menu */}\n                      {showFileMenu && (\n                        <div className=\"absolute z-30 bottom-full mb-1 mx-2 bg-popover border border-border rounded-md shadow-md max-h-40 overflow-y-auto\">\n                          <div className=\"p-2 text-xs font-medium text-muted-foreground border-b border-border\">\n                            Select files to reference:\n                          </div>\n                          {files.filter(f => f.type === 'file' && f.content).map((file) => (\n                            <button\n                              key={file.name}\n                              type=\"button\"\n                              onClick={() => addFileToInput(file)}\n                              className=\"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2\"\n                            >\n                              <AtSign size={14} className=\"text-muted-foreground\" />\n                              {file.name}\n                            </button>\n                          ))}\n                          {files.filter(f => f.type === 'file' && f.content).length === 0 && (\n                            <div className=\"p-3 text-sm text-muted-foreground\">No files available</div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                    \n                    <textarea\n                      ref={inputRef}\n                      placeholder=\"Edit open file and selection\"\n                      className=\"w-full text-foreground border-none shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 placeholder-muted-foreground bg-transparent resize-none overflow-hidden min-h-[40px] max-h-[200px] px-3 py-2 outline-none\"\n                      rows={1}\n                      value={input}\n                      onChange={handleInputChange}\n                      onKeyDown={handleInputKeyDown}\n                      disabled={isLoading}\n                    />\n                    \n                    <div className=\"pb-2\">\n                      <div className=\"flex items-center justify-between px-2\">\n                        <div className=\"flex items-center gap-1\">\n                          <button\n                            type=\"button\"\n                            className=\"h-7 px-2 text-sm flex items-center gap-1 rounded-full bg-muted text-foreground hover:bg-muted/80\"\n                            onClick={() => setMode(mode === 'manual' ? 'auto' : 'manual')}\n                          >\n                            <Hand size={12} className=\"text-muted-foreground\" />\n                            <span className=\"capitalize\">{mode}</span>\n                            <ChevronDown size={12} className=\"text-muted-foreground opacity-60\" />\n                          </button>\n                          \n                          {/* Model Selection */}\n                          <div className=\"relative\">\n                            <button\n                              type=\"button\"\n                              className=\"h-7 px-2 text-sm flex items-center gap-1 rounded-md bg-transparent text-muted-foreground/60 hover:bg-muted/80\"\n                              onClick={() => setIsModelMenuOpen(!isModelMenuOpen)}\n                            >\n                              <span>{AI_MODELS[provider][model as keyof typeof AI_MODELS[typeof provider]]}</span>\n                              <ChevronDown size={12} className=\"text-muted-foreground opacity-60\" />\n                            </button>\n                            \n                            {isModelMenuOpen && (\n                              <div className={`absolute left-0 bg-popover border border-border rounded-md shadow-md min-w-48 z-50 ${\n                                messages.length === 0 ? 'top-full mt-1' : 'bottom-full mb-1'\n                              }`}>\n                                <div className=\"p-2\">\n                                  <div className=\"text-xs font-medium text-muted-foreground mb-2\">OpenAI</div>\n                                  {Object.entries(AI_MODELS.openai).map(([key, label]) => (\n                                    <button\n                                      key={key}\n                                      type=\"button\"\n                                      onClick={() => {\n                                        handleProviderChange('openai');\n                                        setModel(key);\n                                      }}\n                                      className={`w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ${\n                                        provider === 'openai' && model === key ? 'bg-muted' : ''\n                                      }`}\n                                    >\n                                      {label}\n                                    </button>\n                                  ))}\n                                  \n                                  <div className=\"text-xs font-medium text-muted-foreground mt-3 mb-2\">Anthropic</div>\n                                  {Object.entries(AI_MODELS.anthropic).map(([key, label]) => (\n                                    <button\n                                      key={key}\n                                      type=\"button\"\n                                      onClick={() => {\n                                        handleProviderChange('anthropic');\n                                        setModel(key);\n                                      }}\n                                      className={`w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ${\n                                        provider === 'anthropic' && model === key ? 'bg-muted' : ''\n                                      }`}\n                                    >\n                                      {label}\n                                    </button>\n                                  ))}\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                          <button\n                            type=\"button\"\n                            className=\"size-7 h-7 w-7 rounded-full transition-all duration-150 text-muted-foreground hover:text-foreground hover:bg-muted/50\"\n                          >\n                            <CheckSquare size={14} />\n                          </button>\n                          <div className=\"h-8 w-8 flex items-center justify-center\">\n                            <button\n                              type=\"submit\"\n                              className={`size-7 rounded-full h-7 w-7 ${\n                                input.trim() && !isLoading\n                                  ? 'bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105 opacity-100' \n                                  : 'bg-primary/10 text-primary-foreground opacity-10'\n                              }`}\n                              disabled={!input.trim() || isLoading}\n                            >\n                              <Send size={16} className=\"transform rotate-45\" />\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Past Chats */}\n      <div className=\"flex-shrink-0 p-3\">\n        <div className=\"mt-auto\">\n          <div className=\"px-2 py-1 text-muted-foreground\">Past chats</div>\n          <div>\n            <button className=\"w-full px-2 py-1 h-auto flex justify-between items-center hover:bg-muted rounded text-left\">\n              <span className=\"text-foreground font-normal\">Import color variables</span>\n              <span className=\"text-xs text-muted-foreground\">2d ago</span>\n            </button>\n            <button className=\"w-full px-2 py-1 h-auto flex justify-between items-center hover:bg-muted rounded text-left\">\n              <span className=\"text-foreground font-normal\">Refactor importer</span>\n              <span className=\"text-xs text-muted-foreground\">3d ago</span>\n            </button>\n            <button className=\"w-full px-2 py-1 h-auto flex justify-between items-center hover:bg-muted rounded text-left\">\n              <span className=\"text-foreground font-normal\">Color import Figma plug-in</span>\n              <span className=\"text-xs text-muted-foreground\">4d ago</span>\n            </button>\n            <button className=\"w-full px-2 py-1 h-auto flex items-center text-muted-foreground justify-start hover:bg-muted rounded text-left\">\n              <span className=\"text-muted-foreground font-normal\">See all history</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3614, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/components/StatusBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Sun, Moon } from 'lucide-react';\n\nexport function StatusBar() {\n  const [theme, setTheme] = useState<'light' | 'dark'>('dark');\n\n  const toggleTheme = () => {\n    const newTheme = theme === 'light' ? 'dark' : 'light';\n    setTheme(newTheme);\n    \n    // Apply theme to document\n    if (newTheme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-between h-6 text-xs border-t bg-muted text-muted-foreground border-border pl-[calc(0.75rem+env(safe-area-inset-left))] pr-[calc(0.75rem+env(safe-area-inset-right))] md:pl-[calc(1.25rem+env(safe-area-inset-left))] md:pr-[calc(1.25rem+env(safe-area-inset-right))]\">\n      <div className=\"flex items-center space-x-2\">\n        <button className=\"text-xs hover:text-foreground cursor-pointer\">\n          Help\n        </button>\n        <button className=\"text-xs hover:text-foreground cursor-pointer\">\n          Reset\n        </button>\n        <button\n          onClick={toggleTheme}\n          className=\"size-6 w-6 h-6 inline-flex items-center justify-center text-muted-foreground hover:bg-accent hover:text-accent-foreground rounded\"\n        >\n          {theme === 'light' ? (\n            <Sun size={14} className=\"rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n          ) : (\n            <Moon size={14} className=\"absolute rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n          )}\n          <span className=\"sr-only\">Toggle theme</span>\n        </button>\n      </div>\n      <div className=\"flex items-center space-x-2\">\n        <span className=\"font-mono tabular-nums cursor-default\">\n          EOF Past\n        </span>\n        <span>UTF-8</span>\n        <span>HTML</span>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAoB;IAErD,MAAM,cAAc;QAClB,MAAM,WAAW,UAAU,UAAU,SAAS;QAC9C,SAAS;QAET,0BAA0B;QAC1B,IAAI,aAAa,QAAQ;YACvB,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;QACzC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;QAC5C;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,WAAU;kCAA+C;;;;;;kCAGjE,6LAAC;wBAAO,WAAU;kCAA+C;;;;;;kCAGjE,6LAAC;wBACC,SAAS;wBACT,WAAU;;4BAET,UAAU,wBACT,6LAAC,mMAAA,CAAA,MAAG;gCAAC,MAAM;gCAAI,WAAU;;;;;qDAEzB,6LAAC,qMAAA,CAAA,OAAI;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAE5B,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;0BAG9B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAU;kCAAwC;;;;;;kCAGxD,6LAAC;kCAAK;;;;;;kCACN,6LAAC;kCAAK;;;;;;;;;;;;;;;;;;AAId;GA7CgB;KAAA","debugId":null}},
    {"offset": {"line": 3751, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedromarques/Dev/cursor/cursive/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Sidebar } from '@/components/Sidebar';\nimport { EditorArea } from '@/components/EditorArea';\nimport { ChatPanel } from '@/components/ChatPanel';\nimport { StatusBar } from '@/components/StatusBar';\nimport { FileItem, listFiles, saveFile, createFile, deleteFile, setWorkspaceMode, getWorkspaceInfo } from '@/lib/fileApi';\nimport { connectToLocalFolder, isFileSystemAccessSupported } from '@/lib/localFileApi';\n\nexport default function BabyCursor() {\n  const [sidebarWidth] = useState(200);\n  const [chatPanelWidth] = useState(320);\n  const [activeFile, setActiveFile] = useState('');\n  const [files, setFiles] = useState<FileItem[]>([]);\n  const [openFiles, setOpenFiles] = useState<{[key: string]: string}>({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [isRefreshingFiles, setIsRefreshingFiles] = useState(false);\n  const [isPreviewFullscreen, setIsPreviewFullscreen] = useState(false);\n  const [queuedMessages, setQueuedMessages] = useState<Array<{\n    id: string;\n    element: string;\n    message: string;\n    timestamp: number;\n  }>>([]);\n  const [workspaceInfo, setWorkspaceInfo] = useState(getWorkspaceInfo());\n\n  const initializeSampleFiles = useCallback(async () => {\n    try {\n      const sampleFiles = [\n        {\n          name: 'welcome.html',\n          type: 'file' as const,\n          content: `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>Welcome to Baby Cursor</title>\n    <style>\n      body {\n        font-family: system-ui, -apple-system, sans-serif;\n        max-width: 800px;\n        margin: 0 auto;\n        padding: 2rem;\n        line-height: 1.6;\n      }\n      h1 { color: #333; }\n      .feature { margin: 1rem 0; }\n    </style>\n</head>\n<body>\n    <h1>Welcome to Baby Cursor!</h1>\n    <p>A powerful web-based IDE with AI assistance.</p>\n    <div class=\"feature\">✨ Edit this file to see changes in real-time</div>\n    <div class=\"feature\">🤖 Use the chat panel for AI coding help</div>\n    <div class=\"feature\">📁 Create new files and folders</div>\n</body>\n</html>`\n        },\n        {\n          name: 'README.md',\n          type: 'file' as const,\n          content: `# Baby Cursor\n\nA modern web-based IDE with AI assistance.\n\n## Features\n\n- 📝 Monaco Editor with syntax highlighting\n- 🗂️ File system operations (create, edit, delete)\n- 💬 AI chat with file context (@file references)\n- 🎨 Live preview for HTML files\n- 🌙 Dark theme\n\n## Getting Started\n\n1. Create new files using the \"+\" button\n2. Edit files in the Monaco editor\n3. Use @filename in chat to reference files\n4. Choose between OpenAI and Claude models\n\nHappy coding! 🚀`\n        }\n      ];\n\n      for (const file of sampleFiles) {\n        await createFile(file);\n      }\n      \n      // Reload files after creating samples\n      const fileList = await listFiles();\n      setFiles(fileList);\n      setActiveFile('welcome.html');\n    } catch (error) {\n      console.error('Failed to initialize sample files:', error);\n    }\n  }, []);\n\n  const loadFiles = useCallback(async (isInitialLoad = false) => {\n    try {\n      if (isInitialLoad) {\n        setIsLoading(true);\n      } else {\n        setIsRefreshingFiles(true);\n      }\n      \n      const fileList = await listFiles();\n      setFiles(fileList);\n      \n      // Initialize with sample files if workspace is empty\n      if (fileList.length === 0) {\n        await initializeSampleFiles();\n      }\n    } catch (error) {\n      console.error('Failed to load files:', error);\n    } finally {\n      if (isInitialLoad) {\n        setIsLoading(false);\n      } else {\n        setIsRefreshingFiles(false);\n      }\n    }\n  }, [initializeSampleFiles]);\n\n  // Load files on component mount\n  useEffect(() => {\n    loadFiles(true); // Initial load\n  }, [loadFiles]);\n\n  const handleFileSelect = async (fileName: string) => {\n    setActiveFile(fileName);\n    \n    // Load file content if not already loaded\n    if (!openFiles[fileName]) {\n      const file = files.find(f => f.name === fileName);\n      if (file && file.content !== undefined) {\n        setOpenFiles(prev => ({\n          ...prev,\n          [fileName]: file.content!\n        }));\n      }\n    }\n  };\n\n  const handleFileChange = async (fileName: string, content: string) => {\n    setOpenFiles(prev => ({\n      ...prev,\n      [fileName]: content\n    }));\n    \n    // Auto-save after a delay (debounced)\n    // For now, save immediately\n    try {\n      await saveFile(fileName, content);\n    } catch (error) {\n      console.error('Failed to save file:', error);\n    }\n  };\n\n  const refreshFileContents = async () => {\n    try {\n      // Get fresh file list\n      const updatedFiles = await listFiles();\n      setFiles(updatedFiles);\n      \n      // Update content of any currently open files that might have been modified by AI\n      const openFileNames = Object.keys(openFiles);\n      const updatedOpenFiles = { ...openFiles };\n      \n      for (const fileName of openFileNames) {\n        const updatedFile = updatedFiles.find(f => f.name === fileName);\n        if (updatedFile && updatedFile.content !== undefined) {\n          updatedOpenFiles[fileName] = updatedFile.content;\n        }\n      }\n      \n      setOpenFiles(updatedOpenFiles);\n    } catch (error) {\n      console.error('Failed to refresh file contents:', error);\n    }\n  };\n\n  const handleAddQueuedMessage = (element: string, message: string) => {\n    const newMessage = {\n      id: `msg-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      element,\n      message,\n      timestamp: Date.now()\n    };\n    setQueuedMessages(prev => [...prev, newMessage]);\n  };\n\n  const handleFileClose = (fileName: string) => {\n    setOpenFiles(prev => {\n      const newOpenFiles = { ...prev };\n      delete newOpenFiles[fileName];\n      return newOpenFiles;\n    });\n    \n    if (fileName === activeFile) {\n      const remainingFiles = Object.keys(openFiles).filter(f => f !== fileName);\n      setActiveFile(remainingFiles.length > 0 ? remainingFiles[0] : '');\n    }\n  };\n\n  const handleCreateFile = async (name: string, type: 'file' | 'directory' = 'file') => {\n    try {\n      await createFile({ name, type, content: type === 'file' ? '' : undefined });\n      await loadFiles(false); // Not initial load\n      \n      if (type === 'file') {\n        setActiveFile(name);\n        setOpenFiles(prev => ({ ...prev, [name]: '' }));\n      }\n    } catch (error) {\n      console.error('Failed to create file:', error);\n    }\n  };\n\n  const handleDeleteFile = async (fileName: string) => {\n    try {\n      await deleteFile(fileName);\n      await loadFiles(false); // Not initial load\n      \n      // Close file if it was open\n      if (openFiles[fileName]) {\n        handleFileClose(fileName);\n      }\n    } catch (error) {\n      console.error('Failed to delete file:', error);\n    }\n  };\n\n  const handleConnectLocalFolder = async () => {\n    if (!isFileSystemAccessSupported()) {\n      alert('File System Access API is not supported in this browser. Please use a modern browser like Chrome or Edge.');\n      return;\n    }\n\n    try {\n      const workspace = await connectToLocalFolder();\n      setWorkspaceMode('local');\n      setWorkspaceInfo(getWorkspaceInfo());\n      \n      // Clear current files and load from local workspace\n      setFiles([]);\n      setOpenFiles({});\n      setActiveFile('');\n      \n      await loadFiles(false); // Not initial load\n      \n      console.log(`Connected to local workspace: ${workspace.name}`);\n    } catch (error) {\n      console.error('Failed to connect to local folder:', error);\n      if (error instanceof Error && error.message === 'User cancelled folder selection') {\n        // User cancelled, no need to show error\n        return;\n      }\n      alert('Failed to connect to local folder. Please try again.');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen bg-background text-foreground\">\n        <div>Loading workspace...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-dvh bg-background text-foreground pt-[env(safe-area-inset-top)] pl-[env(safe-area-inset-left)] pr-[env(safe-area-inset-right)] overflow-hidden\">\n      <div className=\"flex flex-1 overflow-hidden\">\n        {/* Sidebar */}\n        {!isPreviewFullscreen && (\n          <div \n            className=\"bg-card flex flex-col h-full text-foreground relative transition-all duration-300 select-none border-r border-border\"\n            style={{ width: `${sidebarWidth}px` }}\n          >\n            <div className=\"absolute top-0 right-0 w-1 h-full cursor-col-resize z-10 hover:bg-primary/50 active:bg-primary transition-colors duration-150 ease-in-out\"></div>\n            <Sidebar \n              files={files} \n              activeFile={activeFile} \n              onFileSelect={handleFileSelect}\n              onCreateFile={handleCreateFile}\n              onDeleteFile={handleDeleteFile}\n              onConnectLocalFolder={handleConnectLocalFolder}\n              workspaceName={workspaceInfo.name}\n              isLocalWorkspace={workspaceInfo.mode === 'local'}\n            />\n          </div>\n        )}\n\n        {/* Main Editor Area */}\n        <div className=\"flex-1 flex flex-col overflow-hidden relative\">\n          <EditorArea \n            openFiles={openFiles}\n            activeFile={activeFile} \n            onFileChange={handleFileChange}\n            onFileClose={handleFileClose}\n            onFileSelect={handleFileSelect}\n            isPreviewFullscreen={isPreviewFullscreen}\n            onTogglePreviewFullscreen={() => setIsPreviewFullscreen(!isPreviewFullscreen)}\n            onAddQueuedMessage={handleAddQueuedMessage}\n          />\n        </div>\n\n        {/* Chat Panel */}\n        {!isPreviewFullscreen && (\n          <div className=\"flex h-full\">\n            <div \n              className=\"flex-shrink-0 border-l border-border first:border-l-0 transition-all duration-300\"\n              style={{ minWidth: `${chatPanelWidth}px`, width: `${chatPanelWidth}px`, opacity: 1 }}\n            >\n              <div className=\"relative w-full h-full\">\n                <div \n                  className=\"flex flex-col bg-card h-full transition-all duration-300 relative overflow-hidden border-l border-border\"\n                  style={{ width: `${chatPanelWidth}px` }}\n                >\n                  <div className=\"absolute top-0 left-0 w-1 h-full cursor-col-resize z-10 hover:bg-primary/50 active:bg-primary transition-colors duration-150 ease-in-out\"></div>\n                  <ChatPanel \n                    files={files} \n                    onFileChange={() => loadFiles(false)}\n                    queuedMessages={queuedMessages}\n                    onClearQueuedMessage={(id) => {\n                      setQueuedMessages(prev => prev.filter(msg => msg.id !== id));\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Status Bar */}\n      <StatusBar />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}