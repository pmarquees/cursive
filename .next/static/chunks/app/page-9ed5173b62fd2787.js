(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2733:(e,t,r)=>{Promise.resolve().then(r.bind(r,5722))},5722:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eo});var s=r(5155),n=r(2115),o=r(9890),a=r(9343),l=r(7924),i=r(2775),c=r(4738),d=r(5623),u=r(6474),m=r(3052),x=r(1380),f=r(4416);function h(e){let{files:t,activeFile:r,onFileSelect:h,onCreateFile:p,onDeleteFile:g,onConnectLocalFolder:b,workspaceName:v,isLocalWorkspace:j}=e,[y,N]=(0,n.useState)(!0),[w,k]=(0,n.useState)(!0),[C,z]=(0,n.useState)(!1),[E,A]=(0,n.useState)("file"),[F,D]=(0,n.useState)("");return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"px-3 pb-1 flex-shrink-0",children:(0,s.jsxs)("div",{className:"flex items-center bg-muted rounded-lg px-3 py-1 cursor-pointer hover:bg-muted/80 transition-colors",children:[(0,s.jsx)("span",{className:"text-muted-foreground truncate",children:"pmarquees/main"}),(0,s.jsx)("div",{className:"ml-auto flex-shrink-0",children:(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"⌘P"})})]})}),(0,s.jsxs)("div",{className:"flex justify-center gap-2 px-2 py-2 flex-shrink-0",children:[(0,s.jsx)("button",{className:"p-1 text-muted-foreground hover:text-foreground rounded bg-muted",onClick:()=>{z(!0),A("file"),D("")},title:"New File",children:(0,s.jsx)(o.A,{size:16})}),(0,s.jsx)("button",{className:"p-1 text-muted-foreground hover:text-foreground rounded",onClick:()=>{z(!0),A("directory"),D("")},title:"New Folder",children:(0,s.jsx)(a.A,{size:16})}),(0,s.jsx)("button",{className:"p-1 text-muted-foreground hover:text-foreground rounded",children:(0,s.jsx)(l.A,{size:16})}),(0,s.jsx)("button",{className:"p-1 text-muted-foreground hover:text-foreground rounded",children:(0,s.jsx)(i.A,{size:16})}),(0,s.jsx)("button",{className:"p-1 text-muted-foreground hover:text-foreground rounded",onClick:b,title:"Connect Local Folder",children:(0,s.jsx)(c.A,{size:16})}),(0,s.jsx)("button",{className:"p-1 text-muted-foreground hover:text-foreground rounded",children:(0,s.jsx)(d.A,{size:16})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto px-2 py-1",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center py-1 px-2 cursor-pointer hover:bg-muted rounded",onClick:()=>N(!y),children:[y?(0,s.jsx)(u.A,{size:12,className:"mr-1 text-muted-foreground"}):(0,s.jsx)(m.A,{size:12,className:"mr-1 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium text-xs uppercase text-muted-foreground truncate",children:"Files"})]}),y&&(0,s.jsx)("div",{className:"ml-2",children:(0,s.jsxs)("div",{className:"mb-px",children:[(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer",children:[(0,s.jsx)(u.A,{size:12,className:"mr-1 text-muted-foreground"}),j?(0,s.jsx)(c.A,{size:16,className:"mr-2 text-green-600 flex-shrink-0"}):(0,s.jsx)(x.A,{size:16,className:"mr-2 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:v||"workspace"}),j&&(0,s.jsx)("span",{className:"ml-1 text-xs text-green-600 font-medium",children:"Local"})]}),(0,s.jsxs)("div",{className:"ml-4",children:[C&&(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 mb-1",children:["directory"===E?(0,s.jsx)(x.A,{size:16,className:"mr-2 text-muted-foreground flex-shrink-0"}):(0,s.jsx)(o.A,{size:16,className:"mr-2 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("input",{type:"text",value:F,onChange:e=>D(e.target.value),onKeyDown:e=>{"Enter"===e.key&&F.trim()?(p(F.trim(),E),z(!1),D("")):"Escape"===e.key&&(z(!1),D(""))},onBlur:()=>{F.trim()&&p(F.trim(),E),z(!1),D("")},placeholder:"directory"===E?"Folder name":"File name",className:"flex-1 bg-background text-foreground text-xs border border-border rounded px-1 py-0.5 focus:outline-none focus:ring-1 focus:ring-primary",autoFocus:!0})]}),t.filter(e=>"directory"===e.type).map(e=>(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer group",onClick:()=>h(e.name),children:[(0,s.jsx)(x.A,{size:16,className:"mr-2 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate flex-1",children:e.name}),(0,s.jsx)("button",{className:"opacity-0 group-hover:opacity-100 size-4 flex items-center justify-center text-muted-foreground hover:text-red-500",onClick:t=>{t.stopPropagation(),g(e.name)},children:(0,s.jsx)(f.A,{size:12})})]},e.name)),t.filter(e=>"file"===e.type).map(e=>(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer group ".concat(r===e.name?"bg-muted":""),onClick:()=>h(e.name),children:[(0,s.jsx)(o.A,{size:16,className:"mr-2 text-muted-foreground flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate flex-1 ".concat(r===e.name?"text-foreground":""),children:e.name}),(0,s.jsx)("button",{className:"opacity-0 group-hover:opacity-100 size-4 flex items-center justify-center text-muted-foreground hover:text-red-500",onClick:t=>{t.stopPropagation(),g(e.name)},children:(0,s.jsx)(f.A,{size:12})})]},e.name))]})]})})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center py-1 px-2 cursor-pointer text-muted-foreground hover:bg-muted rounded",onClick:()=>k(!w),children:[w?(0,s.jsx)(u.A,{size:12,className:"mr-1 text-muted-foreground"}):(0,s.jsx)(m.A,{size:12,className:"mr-1 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium text-xs uppercase text-muted-foreground truncate",children:"Chats"})]}),w&&(0,s.jsxs)("div",{className:"ml-2",children:[(0,s.jsx)("div",{className:"mb-px",children:(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer",children:[(0,s.jsx)("div",{className:"w-4 h-4 mr-2 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"})}),(0,s.jsx)("span",{className:"truncate",children:"Update Videos Def..."})]})}),(0,s.jsx)("div",{className:"mb-px",children:(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer",children:[(0,s.jsx)("div",{className:"w-4 h-4 mr-2 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"})}),(0,s.jsx)("span",{className:"truncate",children:"Fix Memory Leak"})]})}),(0,s.jsx)("div",{className:"mb-px",children:(0,s.jsxs)("div",{className:"flex items-center py-0.5 px-2 hover:bg-muted rounded cursor-pointer",children:[(0,s.jsx)("div",{className:"w-4 h-4 mr-2 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-muted-foreground"})}),(0,s.jsx)("span",{className:"truncate",children:"Update Help Articles"})]})})]})]})]})]})}var p=r(5028),g=r(5169),b=r(2138),v=r(381),j=r(1497),y=r(2657),N=r(4311),w=r(1981),k=r(2486);let C=(0,p.default)(()=>r.e(364).then(r.bind(r,1364)),{loadableGenerated:{webpack:()=>[1364]},ssr:!1});function z(e){let{openFiles:t,activeFile:r,onFileChange:a,onFileClose:l,onFileSelect:i,isPreviewFullscreen:c,onTogglePreviewFullscreen:d,onAddQueuedMessage:u}=e,[m,x]=(0,n.useState)("code"),[h,p]=(0,n.useState)(!1),[z,E]=(0,n.useState)(null),[A,F]=(0,n.useState)(""),D=(0,n.useRef)(null),S=t[r],P=Object.keys(t);(0,n.useEffect)(()=>{let e=e=>{("c"===e.key||"C"===e.key)&&("preview"===m||"split"===m)&&(p(!h),E(null)),"Escape"===e.key&&(p(!1),E(null))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[h,m]),(0,n.useEffect)(()=>{if(!D.current||!h)return;let e=D.current,t=()=>{try{let t=e.contentDocument;if(!t)return;let r=t.getElementById("inspection-styles");if(r&&r.remove(),h){let r=t.createElement("style");r.id="inspection-styles",r.textContent="\n            .inspection-hover {\n              outline: 2px solid #3b82f6 !important;\n              outline-offset: 2px !important;\n              cursor: crosshair !important;\n            }\n          ",t.head.appendChild(r);let s=e=>{h&&e.target.classList.add("inspection-hover")},n=e=>{e.target.classList.remove("inspection-hover")},o=t=>{if(!h)return;t.preventDefault(),t.stopPropagation();let r=t.target,s=r.getBoundingClientRect(),n=e.getBoundingClientRect(),o=L(r);E({element:o,position:{x:n.left+s.left+s.width/2,y:n.top+s.top+s.height+10},show:!0})};t.querySelectorAll("*").forEach(e=>{e.addEventListener("mouseover",s),e.addEventListener("mouseout",n),e.addEventListener("click",o)})}}catch(e){console.log("Could not access iframe content for inspection")}};return e.addEventListener("load",t),t(),()=>{e.removeEventListener("load",t)}},[h]);let L=e=>{var t;let r=e.tagName.toLowerCase(),s=e.id?"#".concat(e.id):"",n=e.className?".".concat(e.className.split(" ").join(".")):"",o=(null==(t=e.textContent)?void 0:t.substring(0,50))||"";return"".concat(r).concat(s).concat(n,' - "').concat(o,'"')},I=()=>{z&&A.trim()&&u&&(u(z.element,A.trim()),F(""),E(null),p(!1))},T=e=>{e&&r&&a(r,e)},O=e=>{var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"html":return"html";case"css":return"css";case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"json":return"json";case"md":return"markdown";default:return"plaintext"}};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"bg-card flex items-center px-2 h-[32px] border-b border-border flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center mr-2",children:[(0,s.jsx)("button",{className:"size-7 inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:(0,s.jsx)(g.A,{size:16})}),(0,s.jsx)("button",{className:"size-7 inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:(0,s.jsx)(b.A,{size:16})})]}),(0,s.jsx)("div",{className:"flex flex-1 overflow-x-auto select-none h-[32px]",children:P.map(e=>(0,s.jsxs)("div",{className:"group max-w-[200px] py-1 flex items-center border-l border-border rounded-none px-3 text-xs h-full cursor-pointer ".concat(r===e?"bg-muted text-foreground":"hover:bg-muted/50 text-muted-foreground"),onClick:()=>i(e),children:[(0,s.jsx)(o.A,{size:14,className:"mr-2 text-muted-foreground"}),(0,s.jsx)("span",{className:"truncate max-w-[120px]",children:e}),(0,s.jsx)("button",{className:"ml-2 size-4 inline-flex items-center justify-center text-muted-foreground hover:text-foreground opacity-0 group-hover:opacity-100",onClick:t=>{t.stopPropagation(),l(e)},children:(0,s.jsx)(f.A,{size:14})})]},e))}),(0,s.jsxs)("div",{className:"flex items-center ml-auto",children:[(0,s.jsx)("button",{className:"size-7 p-1 text-muted-foreground hover:text-foreground",children:(0,s.jsx)(v.A,{size:16})}),(0,s.jsx)("button",{className:"size-7 p-1 text-muted-foreground hover:text-foreground",children:(0,s.jsx)(j.A,{size:16})})]})]}),(0,s.jsxs)("div",{className:"bg-muted flex w-full select-none items-center justify-between border-b border-border",children:[(0,s.jsx)("div",{className:"px-4 py-2 flex items-center text-muted-foreground text-sm flex-grow truncate",children:(0,s.jsx)("span",{className:"text-muted-foreground",children:r||"No file selected"})}),(0,s.jsx)("div",{className:"flex items-center px-2 flex-shrink-0",children:(0,s.jsxs)("div",{className:"flex items-center space-x-0.5",children:[(0,s.jsx)("button",{className:"h-7 rounded-md gap-1 px-2 text-sm border ".concat("code"===m?"bg-card border-border":"border-transparent hover:bg-muted opacity-50"),onClick:()=>x("code"),children:"Code"}),(0,s.jsx)("button",{className:"h-7 rounded-md gap-1 px-2 text-sm border ".concat("preview"===m?"bg-card border-border":"border-transparent hover:bg-muted opacity-50"),onClick:()=>x("preview"),children:"Preview"}),(0,s.jsx)("button",{className:"h-7 rounded-md gap-1 px-2 text-sm border ".concat("split"===m?"bg-card border-border":"border-transparent hover:bg-muted opacity-50"),onClick:()=>x("split"),children:"Split"})]})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden relative font-mono text-sm flex flex-col md:flex-row",children:["code"===m&&(0,s.jsx)("div",{className:"w-full h-full",children:r&&void 0!==S?(0,s.jsx)(C,{height:"100%",language:O(r),value:S,onChange:T,theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on"}}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No file selected"})}),"preview"===m&&(0,s.jsx)("div",{className:"w-full h-full bg-white relative",children:(null==r?void 0:r.endsWith(".html"))&&S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("iframe",{ref:D,srcDoc:S,className:"w-full h-full border-none",title:"Preview"}),h&&(0,s.jsxs)("div",{className:"absolute top-2 left-2 bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(y.A,{size:16}),"Inspection Mode (Press ESC to exit)"]}),(0,s.jsx)("button",{onClick:d,className:"absolute top-2 right-2 p-3 bg-black hover:bg-black/80 text-white rounded-lg shadow-lg transition-all duration-200 hover:scale-105",title:c?"Exit fullscreen":"Enter fullscreen",style:{zIndex:99999,backgroundColor:"#000000"},children:c?(0,s.jsx)(N.A,{size:16}):(0,s.jsx)(w.A,{size:16})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Preview not available for this file type"})}),"split"===m&&(0,s.jsxs)("div",{className:"flex w-full h-full",children:[(0,s.jsx)("div",{className:"w-1/2 h-full",children:r&&void 0!==S?(0,s.jsx)(C,{height:"100%",language:O(r),value:S,onChange:T,theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:12,lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on"}}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No file selected"})}),(0,s.jsx)("div",{className:"w-1/2 h-full border-l border-border bg-white relative",children:(null==r?void 0:r.endsWith(".html"))&&S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("iframe",{ref:"split"===m?D:void 0,srcDoc:S,className:"w-full h-full border-none",title:"Preview"}),h&&(0,s.jsxs)("div",{className:"absolute top-2 left-2 bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(y.A,{size:16}),"Inspection Mode (Press ESC to exit)"]}),(0,s.jsx)("button",{onClick:d,className:"absolute top-2 right-2 p-3 bg-black hover:bg-black/80 text-white rounded-lg shadow-lg transition-all duration-200 hover:scale-105",title:c?"Exit fullscreen":"Enter fullscreen",style:{zIndex:99999,backgroundColor:"#000000"},children:c?(0,s.jsx)(N.A,{size:16}):(0,s.jsx)(w.A,{size:16})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Preview not available for this file type"})})]})]}),(null==z?void 0:z.show)&&(0,s.jsxs)("div",{className:"fixed z-[100000] bg-card border border-border rounded-lg shadow-xl p-4 min-w-80 max-w-md",style:{left:z.position.x-160,top:z.position.y},children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-foreground mb-1",children:"Element Selected:"}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded font-mono",children:z.element})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("textarea",{value:A,onChange:e=>F(e.target.value),placeholder:"What would you like to do with this element?",className:"w-full h-20 p-2 border border-border rounded text-sm resize-none bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I()),"Escape"===e.key&&E(null)}})}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)("button",{onClick:()=>E(null),className:"px-3 py-1 text-sm text-muted-foreground hover:text-foreground",children:"Cancel"}),(0,s.jsxs)("button",{onClick:I,disabled:!A.trim(),className:"px-3 py-1 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[(0,s.jsx)(k.A,{size:14}),"Queue Message"]})]})]})]})}var E=r(4616),A=r(2970),F=r(3904),D=r(1801),S=r(6813),P=r(9145),L=r(5605);let I=null;function T(){return"showDirectoryPicker"in window}async function O(){if(!T())throw Error("File System Access API is not supported in this browser");try{let e=await window.showDirectoryPicker({mode:"readwrite"}),t={name:e.name,handle:e};return I=t,t}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw Error("User cancelled folder selection");throw Error("Failed to access local folder")}}async function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!I)throw Error("No workspace connected");try{let t=I.handle;if(e)for(let r of e.split("/").filter(e=>e))t=await t.getDirectoryHandle(r);let r=[];for await(let[s,n]of t.entries()){let t=e?"".concat(e,"/").concat(s):s;if("directory"===n.kind)r.push({name:s,type:"directory",path:t});else if("file"===n.kind){let e=await n.getFile(),o=await e.text();r.push({name:s,type:"file",path:t,content:o})}}return r.sort((e,t)=>e.type!==t.type?"directory"===e.type?-1:1:e.name.localeCompare(t.name))}catch(e){throw Error("Failed to list local files")}}async function H(e,t){if(!I)throw Error("No workspace connected");try{let r=e.split("/").filter(e=>e),s=r.pop(),n=I.handle;for(let e of r)try{n=await n.getDirectoryHandle(e)}catch(t){n=await n.getDirectoryHandle(e,{create:!0})}let o=await n.getFileHandle(s,{create:!0}),a=await o.createWritable();await a.write(t),await a.close()}catch(e){throw Error("Failed to save local file")}}async function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!I)throw Error("No workspace connected");try{let n=s?s.split("/").filter(e=>e):[],o=I.handle;for(let e of n)try{o=await o.getDirectoryHandle(e)}catch(t){o=await o.getDirectoryHandle(e,{create:!0})}let a=s?"".concat(s,"/").concat(e):e;if("directory"===t)return await o.getDirectoryHandle(e,{create:!0}),{name:e,type:"directory",path:a};{let t=await o.getFileHandle(e,{create:!0}),s=await t.createWritable();return await s.write(r),await s.close(),{name:e,type:"file",path:a,content:r}}}catch(e){throw Error("Failed to create local file")}}async function W(e){if(!I)throw Error("No workspace connected");try{let t=e.split("/").filter(e=>e),r=t.pop(),s=I.handle;for(let e of t)s=await s.getDirectoryHandle(e);await s.removeEntry(r,{recursive:!0})}catch(e){throw Error("Failed to delete local file")}}async function R(e){if(!I)throw Error("No workspace connected");try{let t=e.split("/").filter(e=>e),r=t.pop(),s=I.handle;for(let e of t)s=await s.getDirectoryHandle(e);let n=await s.getFileHandle(r),o=await n.getFile(),a=await o.text();return{name:r,type:"file",path:e,content:a}}catch(e){throw Error("Failed to get local file")}}let B="remote";function _(){if("local"===B){let e=I;return{mode:"local",name:(null==e?void 0:e.name)||"Local Workspace"}}return{mode:"remote",name:"workspace"}}async function G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("local"===B)return U(e);let t=await fetch("/api/files?path=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Failed to list files");return(await t.json()).files}async function K(e){if("local"===B)return M(e.name,e.type,e.content||"",e.path||"");let t=await fetch("/api/files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create file");return(await t.json()).file}async function Q(e,t){if("local"===B)return H(e,t);if(!(await fetch("/api/files/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok)throw Error("Failed to save file")}async function q(e){if("local"===B)return W(e);if(!(await fetch("/api/files/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete file")}let Y={openai:{"gpt-4o":"GPT-4o","gpt-4o-mini":"GPT-4o Mini","gpt-4-turbo":"GPT-4 Turbo"},anthropic:{"claude-3-5-sonnet-20241022":"Claude 3.5 Sonnet","claude-3-5-haiku-20241022":"Claude 3.5 Haiku","claude-3-opus-20240229":"Claude 3 Opus"}};async function $(e){if(console.log("processLocalFileOperation called with:",e),!e.localOperation)return console.log("Not a local operation, returning as-is"),e;let t=I;if(console.log("Current workspace:",t),!t)return console.error("No local workspace connected"),{...e,success:!1,error:"No local workspace connected"};try{switch(e.operation){case"create":return await J(e);case"update":return await V(e);case"read":return await X(e);case"list":return await Z(e);case"delete":return await ee(e);default:return{...e,success:!1,error:"Unknown operation: ".concat(e.operation)}}}catch(t){return{...e,success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function J(e){let{fileName:t,content:r}=e.data;if(!t||"string"!=typeof r)throw Error("Invalid file name or content");try{return await M(t,"file",r,""),{...e,success:!0,fileName:t,content:r.slice(0,200)+(r.length>200?"...":""),message:"Created file: ".concat(t," in local workspace")}}catch(e){throw Error("Failed to create local file: ".concat(e instanceof Error?e.message:"Unknown error"))}}async function V(e){let{fileName:t,content:r}=e.data;if(!t||"string"!=typeof r)throw Error("Invalid file name or content");try{return await H(t,r),{...e,success:!0,fileName:t,content:r.slice(0,200)+(r.length>200?"...":""),message:"Updated file: ".concat(t," in local workspace")}}catch(e){throw Error("Failed to update local file: ".concat(e instanceof Error?e.message:"Unknown error"))}}async function X(e){let{fileName:t}=e.data;if(!t)throw Error("Invalid file name");try{let r=await R(t);return{...e,success:!0,fileName:t,content:r.content,message:"Read file: ".concat(t," from local workspace")}}catch(e){throw Error("Failed to read local file: ".concat(e instanceof Error?e.message:"Unknown error"))}}async function Z(e){let{directory:t=""}=e.data;try{let r=await U(t),s=r.filter(e=>"file"===e.type).map(e=>e.name),n=r.filter(e=>"directory"===e.type).map(e=>e.name);return{...e,success:!0,files:s,directories:n,message:"Listed ".concat(s.length," files and ").concat(n.length," directories from local workspace")}}catch(e){throw Error("Failed to list local files: ".concat(e instanceof Error?e.message:"Unknown error"))}}async function ee(e){let{fileName:t}=e.data;if(!t)throw Error("Invalid file name");try{return await W(t),{...e,success:!0,fileName:t,message:"Deleted file: ".concat(t," from local workspace")}}catch(e){throw Error("Failed to delete local file: ".concat(e instanceof Error?e.message:"Unknown error"))}}function et(e){let{files:t,onFileChange:r,queuedMessages:o=[],onClearQueuedMessage:a}=e,[l,i]=(0,n.useState)("manual"),[c,m]=(0,n.useState)("openai"),[x,h]=(0,n.useState)("gpt-4o"),[p,g]=(0,n.useState)([]),[b,v]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),[N,w]=(0,n.useState)(0),[C,z]=(0,n.useState)(!1),[I,T]=(0,n.useState)(!1),[O,U]=(0,n.useState)(null),H=(0,n.useRef)(null),M=(0,n.useRef)(null),{messages:W,input:R,handleInputChange:_,handleSubmit:G,isLoading:K,setInput:Q,append:q}=(0,L.Y_)({api:"/api/chat",body:{model:x,provider:c,fileContext:p},onToolCall:async e=>{let{toolCall:t}=e;console.log("AI is calling tool:",t.toolName)},onFinish:async e=>{if(e.toolInvocations&&e.toolInvocations.length>0){let t=e.toolInvocations.filter(e=>["createFile","updateFile","deleteFile"].includes(e.toolName)),s=B;if(console.log("Current workspace mode in ChatPanel:",s),console.log("File operations found:",t.length),"local"===s)for(let e of(console.log("Processing operations in local mode"),t))if(console.log("Checking invocation:",e.toolName,"state:",e.state),"result"===e.state&&e.result&&e.result.localOperation)try{console.log("Processing local file operation:",e.result),await $(e.result),console.log("Local file operation completed")}catch(e){console.error("Failed to process local file operation:",e)}else console.log("Not a local operation, no result, or invocation not completed");else console.log("Not in local mode, skipping local operations");t.length>0&&r&&(z(!0),setTimeout(async()=>{await r(),z(!1)},100))}}});(0,n.useEffect)(()=>{var e;null==(e=M.current)||e.scrollIntoView({behavior:"smooth"})},[W]);let J=e=>{"@"===e.key?(w(e.currentTarget.selectionStart),y(!0)):"Escape"===e.key&&y(!1)},V=e=>{var t;if(!e.content)return;let r=R.slice(0,N+1),s=R.slice(N+1);Q(r+e.name+" "+s),p.find(t=>t.name===e.name)||g(t=>[...t,{name:e.name,content:e.content}]),y(!1),null==(t=H.current)||t.focus()},X=e=>{g(t=>t.filter(t=>t.name!==e))},Z=async()=>{if(!I&&0!==o.length){for(let e of(T(!0),o)){U(e.id);let t="[Element Inspector] ".concat(e.element,"\n\n").concat(e.message);await q({role:"user",content:t}),await new Promise(e=>{let t=()=>{K?setTimeout(t,500):e(void 0)};t()}),a&&a(e.id),await new Promise(e=>setTimeout(e,1e3))}U(null),T(!1)}},ee=async e=>{e.preventDefault(),o.length>0&&await Z(),R.trim()&&G(e)},et=e=>{m(e),h(Object.keys(Y[e])[0]),v(!1)};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-2 flex justify-between items-center h-[32px] flex-shrink-0",children:[(0,s.jsx)("h2",{className:"font-medium p-2 text-foreground truncate",children:"New Chat"}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("button",{className:"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded",onClick:()=>window.location.reload(),children:(0,s.jsx)(E.A,{size:16})}),(0,s.jsx)("button",{className:"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded",children:(0,s.jsx)(A.A,{size:16})}),(0,s.jsx)("button",{className:"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded",children:(0,s.jsx)(F.A,{size:16})}),(0,s.jsx)("button",{className:"size-7 text-muted-foreground hover:text-foreground hover:bg-muted rounded",children:(0,s.jsx)(d.A,{size:16})})]})]}),(0,s.jsx)("div",{className:"flex flex-col h-[calc(100%-32px)] w-full",children:0===W.length?(0,s.jsx)("div",{className:"flex-1 min-h-0",children:(0,s.jsx)("div",{className:"relative h-full overflow-hidden",children:(0,s.jsx)("div",{className:"size-full rounded-[inherit] overflow-y-auto",children:(0,s.jsx)("div",{className:"p-3 pt-1",children:(0,s.jsx)("div",{className:"border rounded-lg mb-3 opacity-100",children:(0,s.jsx)("div",{className:"bg-muted/40 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-primary/20 transition-all duration-150",children:(0,s.jsxs)("form",{onSubmit:ee,className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"pt-2",children:[o.length>0&&(0,s.jsxs)("div",{className:"mb-2 mx-2",children:[(0,s.jsxs)("div",{className:"text-xs font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["Inspection Queue (",o.length,")"]}),I&&(0,s.jsx)("span",{className:"text-primary",children:"Processing..."})]}),(0,s.jsx)("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"text-xs p-2 bg-muted/50 border border-border rounded flex justify-between items-start ".concat(O===e.id?"border-primary bg-primary/10":""),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"font-medium text-foreground mb-1 truncate",children:[t+1,". ",e.element]}),(0,s.jsx)("div",{className:"text-muted-foreground line-clamp-1",children:e.message})]}),(0,s.jsx)("button",{type:"button",onClick:()=>null==a?void 0:a(e.id),disabled:I,className:"ml-2 text-muted-foreground hover:text-foreground disabled:opacity-50 flex-shrink-0",children:(0,s.jsx)(f.A,{size:12})})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[(0,s.jsx)("button",{type:"button",className:"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1",onClick:()=>y(!j),children:(0,s.jsx)("span",{className:"text-muted-foreground",children:"@"})}),p.map(e=>(0,s.jsxs)("button",{type:"button",className:"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1",onClick:()=>X(e.name),children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"</>"}),(0,s.jsx)("span",{className:"text-muted-foreground font-normal truncate max-w-[150px]",children:e.name}),(0,s.jsx)(f.A,{size:12,className:"text-muted-foreground"})]},e.name))]}),j&&(0,s.jsxs)("div",{className:"absolute z-30 mt-1 mx-2 bg-popover border border-border rounded-md shadow-md max-h-40 overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-2 text-xs font-medium text-muted-foreground border-b border-border",children:"Select files to reference:"}),t.filter(e=>"file"===e.type&&e.content).map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>V(e),className:"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2",children:[(0,s.jsx)(D.A,{size:14,className:"text-muted-foreground"}),e.name]},e.name)),0===t.filter(e=>"file"===e.type&&e.content).length&&(0,s.jsx)("div",{className:"p-3 text-sm text-muted-foreground",children:"No files available"})]})]}),(0,s.jsx)("textarea",{ref:H,placeholder:"Edit open file and selection",className:"w-full text-foreground border-none shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 placeholder-muted-foreground bg-transparent resize-none overflow-hidden min-h-[40px] max-h-[200px] px-3 py-2 outline-none",rows:1,value:R,onChange:_,onKeyDown:J,disabled:K}),(0,s.jsx)("div",{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("button",{type:"button",className:"h-7 px-2 text-sm flex items-center gap-1 rounded-full bg-muted text-foreground hover:bg-muted/80",onClick:()=>i("manual"===l?"auto":"manual"),children:[(0,s.jsx)(S.A,{size:12,className:"text-muted-foreground"}),(0,s.jsx)("span",{className:"capitalize",children:l}),(0,s.jsx)(u.A,{size:12,className:"text-muted-foreground opacity-60"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",className:"h-7 px-2 text-sm flex items-center gap-1 rounded-md bg-transparent text-muted-foreground/60 hover:bg-muted/80",onClick:()=>v(!b),children:[(0,s.jsx)("span",{children:Y[c][x]}),(0,s.jsx)(u.A,{size:12,className:"text-muted-foreground opacity-60"})]}),b&&(0,s.jsx)("div",{className:"absolute left-0 bg-popover border border-border rounded-md shadow-md min-w-48 z-50 ".concat(0===W.length?"top-full mt-1":"bottom-full mb-1"),children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"OpenAI"}),Object.entries(Y.openai).map(e=>{let[t,r]=e;return(0,s.jsx)("button",{type:"button",onClick:()=>{et("openai"),h(t)},className:"w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ".concat("openai"===c&&x===t?"bg-muted":""),children:r},t)}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground mt-3 mb-2",children:"Anthropic"}),Object.entries(Y.anthropic).map(e=>{let[t,r]=e;return(0,s.jsx)("button",{type:"button",onClick:()=>{et("anthropic"),h(t)},className:"w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ".concat("anthropic"===c&&x===t?"bg-muted":""),children:r},t)})]})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",className:"size-7 h-7 w-7 rounded-full transition-all duration-150 text-muted-foreground hover:text-foreground hover:bg-muted/50",children:(0,s.jsx)(P.A,{size:14})}),(0,s.jsx)("div",{className:"h-8 w-8 flex items-center justify-center",children:(0,s.jsx)("button",{type:"submit",className:"size-7 rounded-full h-7 w-7 ".concat(R.trim()&&!K?"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105 opacity-100":"bg-primary/10 text-primary-foreground opacity-10"),disabled:!R.trim()||K,children:(0,s.jsx)(k.A,{size:16,className:"transform rotate-45"})})})]})]})})]})})})})})})}):(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex-1 min-h-0",children:(0,s.jsx)("div",{className:"relative h-full overflow-hidden",children:(0,s.jsx)("div",{className:"size-full rounded-[inherit] overflow-y-auto",children:(0,s.jsx)("div",{className:"p-3 pt-1",children:(0,s.jsxs)("div",{className:"mb-3 space-y-3",children:[W.map(e=>(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-xs uppercase text-muted-foreground mb-1",children:"user"===e.role?"You":"Assistant"}),(0,s.jsx)("div",{className:"text-foreground",dangerouslySetInnerHTML:{__html:e.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-muted px-1 rounded text-xs">$1</code>').replace(/\n/g,"<br />")}}),e.toolInvocations&&e.toolInvocations.length>0&&(0,s.jsx)("div",{className:"mt-2 space-y-1",children:e.toolInvocations.map((e,t)=>(0,s.jsxs)("div",{className:"text-xs bg-muted/50 rounded px-2 py-1 border-l-2 border-primary/30",children:["call"===e.state&&(0,s.jsxs)("div",{className:"text-muted-foreground",children:["\uD83D\uDD27 Calling ",e.toolName,"..."]}),"result"===e.state&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-primary font-medium",children:["createFile"===e.toolName&&"\uD83D\uDCDD Created file","updateFile"===e.toolName&&"✏️ Updated file","deleteFile"===e.toolName&&"\uD83D\uDDD1️ Deleted file","readFile"===e.toolName&&"\uD83D\uDCD6 Read file","listFiles"===e.toolName&&"\uD83D\uDCC1 Listed files"]}),e.result.success&&e.result.message&&(0,s.jsx)("div",{className:"text-muted-foreground",children:e.result.message}),!e.result.success&&e.result.error&&(0,s.jsxs)("div",{className:"text-red-500",children:["Error: ",e.result.error]})]})]},t))})]},e.id)),K&&(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-xs uppercase text-muted-foreground mb-1",children:"Assistant"}),(0,s.jsx)("div",{className:"text-muted-foreground",children:"Thinking..."})]}),C&&(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-xs uppercase text-muted-foreground mb-1",children:"System"}),(0,s.jsx)("div",{className:"text-primary",children:"\uD83D\uDD04 Updating files..."})]}),(0,s.jsx)("div",{ref:M})]})})})})}),(0,s.jsx)("div",{className:"flex-shrink-0 p-3 pt-0",children:(0,s.jsx)("div",{className:"border rounded-lg opacity-100",children:(0,s.jsx)("div",{className:"bg-muted/40 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-primary/20 transition-all duration-150",children:(0,s.jsxs)("form",{onSubmit:ee,className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"pt-2",children:[o.length>0&&(0,s.jsxs)("div",{className:"mb-2 mx-2",children:[(0,s.jsxs)("div",{className:"text-xs font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["Inspection Queue (",o.length,")"]}),I&&(0,s.jsx)("span",{className:"text-primary",children:"Processing..."})]}),(0,s.jsx)("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"text-xs p-2 bg-muted/50 border border-border rounded flex justify-between items-start ".concat(O===e.id?"border-primary bg-primary/10":""),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"font-medium text-foreground mb-1 truncate",children:[t+1,". ",e.element]}),(0,s.jsx)("div",{className:"text-muted-foreground line-clamp-1",children:e.message})]}),(0,s.jsx)("button",{type:"button",onClick:()=>null==a?void 0:a(e.id),disabled:I,className:"ml-2 text-muted-foreground hover:text-foreground disabled:opacity-50 flex-shrink-0",children:(0,s.jsx)(f.A,{size:12})})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[(0,s.jsx)("button",{type:"button",className:"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1",onClick:()=>y(!j),children:(0,s.jsx)("span",{className:"text-muted-foreground",children:"@"})}),p.map(e=>(0,s.jsxs)("button",{type:"button",className:"h-7 rounded-md px-2 text-sm border bg-background hover:bg-accent flex items-center gap-1",onClick:()=>X(e.name),children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"</>"}),(0,s.jsx)("span",{className:"text-muted-foreground font-normal truncate max-w-[150px]",children:e.name}),(0,s.jsx)(f.A,{size:12,className:"text-muted-foreground"})]},e.name))]}),j&&(0,s.jsxs)("div",{className:"absolute z-30 bottom-full mb-1 mx-2 bg-popover border border-border rounded-md shadow-md max-h-40 overflow-y-auto",children:[(0,s.jsx)("div",{className:"p-2 text-xs font-medium text-muted-foreground border-b border-border",children:"Select files to reference:"}),t.filter(e=>"file"===e.type&&e.content).map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>V(e),className:"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2",children:[(0,s.jsx)(D.A,{size:14,className:"text-muted-foreground"}),e.name]},e.name)),0===t.filter(e=>"file"===e.type&&e.content).length&&(0,s.jsx)("div",{className:"p-3 text-sm text-muted-foreground",children:"No files available"})]})]}),(0,s.jsx)("textarea",{ref:H,placeholder:"Edit open file and selection",className:"w-full text-foreground border-none shadow-none focus-visible:ring-0 focus-visible:ring-offset-0 placeholder-muted-foreground bg-transparent resize-none overflow-hidden min-h-[40px] max-h-[200px] px-3 py-2 outline-none",rows:1,value:R,onChange:_,onKeyDown:J,disabled:K}),(0,s.jsx)("div",{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("button",{type:"button",className:"h-7 px-2 text-sm flex items-center gap-1 rounded-full bg-muted text-foreground hover:bg-muted/80",onClick:()=>i("manual"===l?"auto":"manual"),children:[(0,s.jsx)(S.A,{size:12,className:"text-muted-foreground"}),(0,s.jsx)("span",{className:"capitalize",children:l}),(0,s.jsx)(u.A,{size:12,className:"text-muted-foreground opacity-60"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",className:"h-7 px-2 text-sm flex items-center gap-1 rounded-md bg-transparent text-muted-foreground/60 hover:bg-muted/80",onClick:()=>v(!b),children:[(0,s.jsx)("span",{children:Y[c][x]}),(0,s.jsx)(u.A,{size:12,className:"text-muted-foreground opacity-60"})]}),b&&(0,s.jsx)("div",{className:"absolute left-0 bg-popover border border-border rounded-md shadow-md min-w-48 z-50 ".concat(0===W.length?"top-full mt-1":"bottom-full mb-1"),children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"OpenAI"}),Object.entries(Y.openai).map(e=>{let[t,r]=e;return(0,s.jsx)("button",{type:"button",onClick:()=>{et("openai"),h(t)},className:"w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ".concat("openai"===c&&x===t?"bg-muted":""),children:r},t)}),(0,s.jsx)("div",{className:"text-xs font-medium text-muted-foreground mt-3 mb-2",children:"Anthropic"}),Object.entries(Y.anthropic).map(e=>{let[t,r]=e;return(0,s.jsx)("button",{type:"button",onClick:()=>{et("anthropic"),h(t)},className:"w-full text-left px-2 py-1 text-sm rounded hover:bg-muted ".concat("anthropic"===c&&x===t?"bg-muted":""),children:r},t)})]})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",className:"size-7 h-7 w-7 rounded-full transition-all duration-150 text-muted-foreground hover:text-foreground hover:bg-muted/50",children:(0,s.jsx)(P.A,{size:14})}),(0,s.jsx)("div",{className:"h-8 w-8 flex items-center justify-center",children:(0,s.jsx)("button",{type:"submit",className:"size-7 rounded-full h-7 w-7 ".concat(R.trim()&&!K?"bg-primary text-primary-foreground hover:bg-primary/90 hover:scale-105 opacity-100":"bg-primary/10 text-primary-foreground opacity-10"),disabled:!R.trim()||K,children:(0,s.jsx)(k.A,{size:16,className:"transform rotate-45"})})})]})]})})]})})})})]})}),(0,s.jsx)("div",{className:"flex-shrink-0 p-3",children:(0,s.jsxs)("div",{className:"mt-auto",children:[(0,s.jsx)("div",{className:"px-2 py-1 text-muted-foreground",children:"Past chats"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{className:"w-full px-2 py-1 h-auto flex justify-between items-center hover:bg-muted rounded text-left",children:[(0,s.jsx)("span",{className:"text-foreground font-normal",children:"Import color variables"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"2d ago"})]}),(0,s.jsxs)("button",{className:"w-full px-2 py-1 h-auto flex justify-between items-center hover:bg-muted rounded text-left",children:[(0,s.jsx)("span",{className:"text-foreground font-normal",children:"Refactor importer"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"3d ago"})]}),(0,s.jsxs)("button",{className:"w-full px-2 py-1 h-auto flex justify-between items-center hover:bg-muted rounded text-left",children:[(0,s.jsx)("span",{className:"text-foreground font-normal",children:"Color import Figma plug-in"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"4d ago"})]}),(0,s.jsx)("button",{className:"w-full px-2 py-1 h-auto flex items-center text-muted-foreground justify-start hover:bg-muted rounded text-left",children:(0,s.jsx)("span",{className:"text-muted-foreground font-normal",children:"See all history"})})]})]})})]})}var er=r(2098),es=r(3509);function en(){let[e,t]=(0,n.useState)("dark");return(0,s.jsxs)("div",{className:"flex items-center justify-between h-6 text-xs border-t bg-muted text-muted-foreground border-border pl-[calc(0.75rem+env(safe-area-inset-left))] pr-[calc(0.75rem+env(safe-area-inset-right))] md:pl-[calc(1.25rem+env(safe-area-inset-left))] md:pr-[calc(1.25rem+env(safe-area-inset-right))]",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{className:"text-xs hover:text-foreground cursor-pointer",children:"Help"}),(0,s.jsx)("button",{className:"text-xs hover:text-foreground cursor-pointer",children:"Reset"}),(0,s.jsxs)("button",{onClick:()=>{let r="light"===e?"dark":"light";t(r),"dark"===r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},className:"size-6 w-6 h-6 inline-flex items-center justify-center text-muted-foreground hover:bg-accent hover:text-accent-foreground rounded",children:["light"===e?(0,s.jsx)(er.A,{size:14,className:"rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}):(0,s.jsx)(es.A,{size:14,className:"absolute rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-mono tabular-nums cursor-default",children:"EOF Past"}),(0,s.jsx)("span",{children:"UTF-8"}),(0,s.jsx)("span",{children:"HTML"})]})]})}function eo(){let[e]=(0,n.useState)(200),[t]=(0,n.useState)(320),[o,a]=(0,n.useState)(""),[l,i]=(0,n.useState)([]),[c,d]=(0,n.useState)({}),[u,m]=(0,n.useState)(!0),[x,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)([]),[b,v]=(0,n.useState)(_()),j=(0,n.useCallback)(async()=>{try{for(let e of[{name:"welcome.html",type:"file",content:'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <title>Welcome to Baby Cursor</title>\n    <style>\n      body {\n        font-family: system-ui, -apple-system, sans-serif;\n        max-width: 800px;\n        margin: 0 auto;\n        padding: 2rem;\n        line-height: 1.6;\n      }\n      h1 { color: #333; }\n      .feature { margin: 1rem 0; }\n    </style>\n</head>\n<body>\n    <h1>Welcome to Baby Cursor!</h1>\n    <p>A powerful web-based IDE with AI assistance.</p>\n    <div class="feature">✨ Edit this file to see changes in real-time</div>\n    <div class="feature">\uD83E\uDD16 Use the chat panel for AI coding help</div>\n    <div class="feature">\uD83D\uDCC1 Create new files and folders</div>\n</body>\n</html>'},{name:"README.md",type:"file",content:'# Baby Cursor\n\nA modern web-based IDE with AI assistance.\n\n## Features\n\n- \uD83D\uDCDD Monaco Editor with syntax highlighting\n- \uD83D\uDDC2️ File system operations (create, edit, delete)\n- \uD83D\uDCAC AI chat with file context (@file references)\n- \uD83C\uDFA8 Live preview for HTML files\n- \uD83C\uDF19 Dark theme\n\n## Getting Started\n\n1. Create new files using the "+" button\n2. Edit files in the Monaco editor\n3. Use @filename in chat to reference files\n4. Choose between OpenAI and Claude models\n\nHappy coding! \uD83D\uDE80'}])await K(e);let e=await G();i(e),a("welcome.html")}catch(e){console.error("Failed to initialize sample files:",e)}},[]),y=(0,n.useCallback)(async()=>{try{m(!0);let e=await G();i(e),0===e.length&&await j()}catch(e){console.error("Failed to load files:",e)}finally{m(!1)}},[j]);(0,n.useEffect)(()=>{y()},[y]);let N=async e=>{if(a(e),!c[e]){let t=l.find(t=>t.name===e);t&&void 0!==t.content&&d(r=>({...r,[e]:t.content}))}},w=async(e,t)=>{d(r=>({...r,[e]:t}));try{await Q(e,t)}catch(e){console.error("Failed to save file:",e)}},k=async()=>{try{let e=await G();i(e);let t=Object.keys(c),r={...c};for(let s of t){let t=e.find(e=>e.name===s);t&&void 0!==t.content&&(r[s]=t.content)}d(r)}catch(e){console.error("Failed to refresh file contents:",e)}},C=e=>{if(d(t=>{let r={...t};return delete r[e],r}),e===o){let t=Object.keys(c).filter(t=>t!==e);a(t.length>0?t[0]:"")}},E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";try{await K({name:e,type:t,content:"file"===t?"":void 0}),await y(),"file"===t&&(a(e),d(t=>({...t,[e]:""})))}catch(e){console.error("Failed to create file:",e)}},A=async e=>{try{await q(e),await y(),c[e]&&C(e)}catch(e){console.error("Failed to delete file:",e)}},F=async()=>{if(!T())return void alert("File System Access API is not supported in this browser. Please use a modern browser like Chrome or Edge.");try{let t=await O();var e="local";B=e;try{r.e(937).then(r.bind(r,9937)).then(t=>{t.setWorkspaceMode&&(t.setWorkspaceMode(e),console.log("Synced workspace mode to unified file ops:",e))})}catch(e){console.warn("Failed to sync workspace mode:",e)}v(_()),i([]),d({}),a(""),await y(),console.log("Connected to local workspace: ".concat(t.name))}catch(e){if(console.error("Failed to connect to local folder:",e),e instanceof Error&&"User cancelled folder selection"===e.message)return;alert("Failed to connect to local folder. Please try again.")}};return u?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-background text-foreground",children:(0,s.jsx)("div",{children:"Loading workspace..."})}):(0,s.jsxs)("div",{className:"flex flex-col h-dvh bg-background text-foreground pt-[env(safe-area-inset-top)] pl-[env(safe-area-inset-left)] pr-[env(safe-area-inset-right)] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[!x&&(0,s.jsxs)("div",{className:"bg-card flex flex-col h-full text-foreground relative transition-all duration-300 select-none border-r border-border",style:{width:"".concat(e,"px")},children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize z-10 hover:bg-primary/50 active:bg-primary transition-colors duration-150 ease-in-out"}),(0,s.jsx)(h,{files:l,activeFile:o,onFileSelect:N,onCreateFile:E,onDeleteFile:A,onConnectLocalFolder:F,workspaceName:b.name,isLocalWorkspace:"local"===b.mode})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:(0,s.jsx)(z,{openFiles:c,activeFile:o,onFileChange:w,onFileClose:C,onFileSelect:N,isPreviewFullscreen:x,onTogglePreviewFullscreen:()=>f(!x),onAddQueuedMessage:(e,t)=>{let r={id:"msg-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),element:e,message:t,timestamp:Date.now()};g(e=>[...e,r])}})}),!x&&(0,s.jsx)("div",{className:"flex h-full",children:(0,s.jsx)("div",{className:"flex-shrink-0 border-l border-border first:border-l-0 transition-all duration-300",style:{minWidth:"".concat(t,"px"),width:"".concat(t,"px"),opacity:1},children:(0,s.jsx)("div",{className:"relative w-full h-full",children:(0,s.jsxs)("div",{className:"flex flex-col bg-card h-full transition-all duration-300 relative overflow-hidden border-l border-border",style:{width:"".concat(t,"px")},children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-1 h-full cursor-col-resize z-10 hover:bg-primary/50 active:bg-primary transition-colors duration-150 ease-in-out"}),(0,s.jsx)(et,{files:l,onFileChange:k,queuedMessages:p,onClearQueuedMessage:e=>{g(t=>t.filter(t=>t.id!==e))}})]})})})})]}),(0,s.jsx)(en,{})]})}}},e=>{e.O(0,[402,441,964,358],()=>e(e.s=2733)),_N_E=e.O()}]);